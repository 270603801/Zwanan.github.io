<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.13.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Spring5的学习笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring5">
<meta property="og:url" content="http://example.com/2022/11/01/Spring5%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Zwanan的博客">
<meta property="og:description" content="Spring5的学习笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="d:\SuchAllDir\%E6%96%87%E4%BB%B6%E5%A4%B9\%E5%81%B7%E7%9B%97%E6%8A%A2%E5%88%B0%E7%9A%84%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99\spring5\%E7%AC%94%E8%AE%B0\%E5%88%86%E6%9E%90%E5%9B%BE\%E5%9B%BE1.png">
<meta property="og:image" content="d:\SuchAllDir\%E6%96%87%E4%BB%B6%E5%A4%B9\%E5%81%B7%E7%9B%97%E6%8A%A2%E5%88%B0%E7%9A%84%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99\spring5\%E7%AC%94%E8%AE%B0\%E5%88%86%E6%9E%90%E5%9B%BE\%E5%9B%BE2.png">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="d:\SuchAllDir\%E6%96%87%E4%BB%B6%E5%A4%B9\%E5%81%B7%E7%9B%97%E6%8A%A2%E5%88%B0%E7%9A%84%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99\spring5\%E7%AC%94%E8%AE%B0\%E5%88%86%E6%9E%90%E5%9B%BE\%E5%9B%BE4.png">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="og:image" content="c:\Users\hu">
<meta property="article:published_time" content="2022-11-01T04:30:56.000Z">
<meta property="article:modified_time" content="2022-11-01T04:45:20.660Z">
<meta property="article:author" content="作者：Zwanan">
<meta property="article:tag" content="javaWeb">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="d:\SuchAllDir\%E6%96%87%E4%BB%B6%E5%A4%B9\%E5%81%B7%E7%9B%97%E6%8A%A2%E5%88%B0%E7%9A%84%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99\spring5\%E7%AC%94%E8%AE%B0\%E5%88%86%E6%9E%90%E5%9B%BE\%E5%9B%BE1.png">


<link rel="canonical" href="http://example.com/2022/11/01/Spring5%E7%AC%94%E8%AE%B0/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2022/11/01/Spring5%E7%AC%94%E8%AE%B0/","path":"2022/11/01/Spring5笔记/","title":"Spring5"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Spring5 | Zwanan的博客</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Zwanan的博客</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">平平淡淡，常乐长乐</p>
      <img class="custom-logo-image" src="/uploads/custom-logo.png" alt="Zwanan的博客">
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">3</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">3</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">3</span></a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring5"><span class="nav-number">1.</span> <span class="nav-text">Spring5</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IOC"><span class="nav-number">1.1.</span> <span class="nav-text">IOC</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#IOC-%E6%A6%82%E5%BF%B5%E5%8E%9F%E7%90%86"><span class="nav-number">1.1.1.</span> <span class="nav-text">IOC(概念原理)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFIOC"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">1.什么是IOC</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%EF%BC%8C%E6%8A%8A%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E5%92%8C%E5%AF%B9%E8%B1%A1%E4%B9%8B%E9%97%B4%E7%9A%84%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%EF%BC%8C%E4%BA%A4%E7%BB%99spring%E8%BF%9B%E8%A1%8C%E7%AE%A1%E7%90%86"><span class="nav-number">1.1.1.1.1.</span> <span class="nav-text">(1)控制反转，把对象创建和对象之间的调用过程，交给spring进行管理</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8IOC%E7%9B%AE%E7%9A%84%EF%BC%9A%E9%99%8D%E4%BD%8E%E8%80%A6%E5%90%88"><span class="nav-number">1.1.1.1.2.</span> <span class="nav-text">(2)使用IOC目的：降低耦合</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-IOC%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">2.IOC底层原理</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-xml%E8%A7%A3%E6%9E%90%EF%BC%8C%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%8F%8D%E5%B0%84"><span class="nav-number">1.1.1.2.1.</span> <span class="nav-text">(1)xml解析，工厂模式，反射</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-ioc%E8%BF%87%E7%A8%8B"><span class="nav-number">1.1.1.2.2.</span> <span class="nav-text">(2)ioc过程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IOC-%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.1.2.</span> <span class="nav-text">IOC(接口)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-IOC%E6%80%9D%E6%83%B3%E5%9F%BA%E4%BA%8EIOC%E5%AE%B9%E5%99%A8%E5%AE%8C%E6%88%90%EF%BC%8CIOC%E5%AE%B9%E5%99%A8%E5%BA%95%E5%B1%82%E5%B0%B1%E6%98%AF%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.1.2.0.1.</span> <span class="nav-text">1.IOC思想基于IOC容器完成，IOC容器底层就是工厂模式</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-Spring%E6%8F%90%E4%BE%9BIOC%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0%E4%BF%A9%E7%A7%8D%E6%8E%A5%E5%8F%A3%EF%BC%9A"><span class="nav-number">1.1.2.0.2.</span> <span class="nav-text">2.Spring提供IOC容器实现俩种接口：</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-ApplicationContext%E6%8E%A5%E5%8F%A3%E6%9C%89%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="nav-number">1.1.2.0.3.</span> <span class="nav-text">3.ApplicationContext接口有实现类</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%93%8D%E4%BD%9CBean%E7%AE%A1%E7%90%86%EF%BC%88%E6%A6%82%E5%BF%B5%EF%BC%89"><span class="nav-number">1.1.3.</span> <span class="nav-text">操作Bean管理（概念）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFBean%E7%AE%A1%E7%90%86"><span class="nav-number">1.1.3.0.1.</span> <span class="nav-text">1.什么是Bean管理</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E4%B8%A4%E7%A7%8D%E7%AE%A1%E7%90%86%E6%93%8D%E4%BD%9C"><span class="nav-number">1.1.3.0.2.</span> <span class="nav-text">2.两种管理操作</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%93%8D%E4%BD%9CBean-%E5%9F%BA%E4%BA%8Exml"><span class="nav-number">1.1.4.</span> <span class="nav-text">操作Bean(基于xml)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E5%9F%BA%E4%BA%8Exml%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.1.4.0.1.</span> <span class="nav-text">1.基于xml创建对象</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%9F%BA%E4%BA%8Exml%E6%96%B9%E5%BC%8F%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7"><span class="nav-number">1.1.4.0.2.</span> <span class="nav-text">2.基于xml方式注入属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E7%AC%AC%E4%B8%80%E7%A7%8D%EF%BC%9A%E4%BD%BF%E7%94%A8set%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E6%B3%A8%E5%85%A5"><span class="nav-number">1.1.4.0.3.</span> <span class="nav-text">3.第一种：使用set方法进行注入</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-%E7%AC%AC%E4%BA%8C%E7%A7%8D%EF%BC%9A%E5%B8%A6%E5%8F%82%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="nav-number">1.1.4.0.4.</span> <span class="nav-text">4.第二种：带参构造方法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-p%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E6%B3%A8%E5%85%A5"><span class="nav-number">1.1.4.0.5.</span> <span class="nav-text">5.p名称空间注入</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IOC%E6%93%8D%E4%BD%9CBean%E7%AE%A1%E7%90%86-xml%E6%B3%A8%E5%85%A5%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="nav-number">1.1.5.</span> <span class="nav-text">IOC操作Bean管理(xml注入其他类型属性)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="nav-number">1.1.5.0.1.</span> <span class="nav-text">1.字面量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7-%E5%A4%96%E9%83%A8bean"><span class="nav-number">1.1.5.0.2.</span> <span class="nav-text">2.注入属性-外部bean</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7-%E5%86%85%E9%83%A8bean%E5%92%8C%E7%BA%A7%E8%81%94%E8%B5%8B%E5%80%BC"><span class="nav-number">1.1.5.0.3.</span> <span class="nav-text">3.注入属性-内部bean和级联赋值</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7-%E7%BA%A7%E8%81%94%E8%B5%8B%E5%80%BC"><span class="nav-number">1.1.5.0.4.</span> <span class="nav-text">4.注入属性-级联赋值</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88xml%E6%B3%A8%E5%85%A5%E9%9B%86%E5%90%88%E5%B1%9E%E6%80%A7%EF%BC%89"><span class="nav-number">1.1.6.</span> <span class="nav-text">IOC 操作 Bean 管理（xml注入集合属性）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E6%B3%A8%E5%85%A5%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">1.1.6.0.1.</span> <span class="nav-text">1.注入数组类型的属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E6%B3%A8%E5%85%A5List%E9%9B%86%E5%90%88%E5%B1%9E%E6%80%A7"><span class="nav-number">1.1.6.0.2.</span> <span class="nav-text">2.注入List集合属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E6%B3%A8%E5%85%A5Map%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="nav-number">1.1.6.0.3.</span> <span class="nav-text">3.注入Map集合类型属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-%E5%9C%A8%E9%9B%86%E5%90%88%E4%B8%AD%E8%AE%BE%E7%BD%AE%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7"><span class="nav-number">1.1.6.0.4.</span> <span class="nav-text">4.在集合中设置对象属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-%E6%8A%8A%E9%9B%86%E5%90%88%E6%B3%A8%E5%85%A5%E9%83%A8%E5%88%86%E5%8F%96%E5%87%BA%E6%9D%A5"><span class="nav-number">1.1.6.0.5.</span> <span class="nav-text">5.把集合注入部分取出来</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86-%EF%BC%88FactoryBean%EF%BC%89"><span class="nav-number">1.1.7.</span> <span class="nav-text">IOC 操作 Bean 管理 （FactoryBean）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-Spring%E4%B8%AD%E6%9C%89%E4%B8%A4%E7%A7%8Dbean-%E4%B8%80%E7%A7%8D%E6%99%AE%E9%80%9Abean-%E4%B8%80%E7%A7%8D%E5%B7%A5%E5%8E%82bean-FactoryBean"><span class="nav-number">1.1.7.0.1.</span> <span class="nav-text">1.Spring中有两种bean,一种普通bean,一种工厂bean(FactoryBean)</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E6%99%AE%E9%80%9Abean%EF%BC%9A%E5%9C%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E5%AE%9A%E4%B9%89bean%E7%B1%BB%E5%9E%8B%E5%B0%B1%E6%98%AF%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.1.7.0.2.</span> <span class="nav-text">2.普通bean：在配置文件中定义bean类型就是返回类型</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E5%B7%A5%E5%8E%82bean%EF%BC%9A%E5%9C%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%AE%9A%E4%B9%89%E7%9A%84bean%E7%B1%BB%E5%9E%8B%E5%8F%AF%E4%BB%A5%E5%92%8C%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%E4%B8%8D%E4%B8%80%E6%A0%B7"><span class="nav-number">1.1.7.0.3.</span> <span class="nav-text">3.工厂bean：在配置文件定义的bean类型可以和返回类型不一样</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86-%EF%BC%88bean%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%89"><span class="nav-number">1.1.8.</span> <span class="nav-text">IOC 操作 Bean 管理 （bean作用域）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E5%9C%A8Spring%E9%87%8C%E9%9D%A2%EF%BC%8C%E8%AE%BE%E7%BD%AE%E5%88%9B%E5%BB%BAbean%E5%AE%9E%E4%BE%8B%E6%98%AF%E5%8D%95%E5%AE%9E%E4%BE%8B%E8%BF%98%E6%98%AF%E5%A4%9A%E5%AE%9E%E4%BE%8B"><span class="nav-number">1.1.8.0.1.</span> <span class="nav-text">1.在Spring里面，设置创建bean实例是单实例还是多实例</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%9C%A8Spring%E9%87%8C%E9%9D%A2-bean%E6%98%AF%E5%8D%95%E5%AE%9E%E4%BE%8B%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.1.8.0.2.</span> <span class="nav-text">2.在Spring里面,bean是单实例对象</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E5%8D%95%E5%AE%9E%E4%BE%8B%E8%BF%98%E6%98%AF%E5%A4%9A%E5%AE%9E%E4%BE%8B"><span class="nav-number">1.1.8.0.3.</span> <span class="nav-text">3.如何设置单实例还是多实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86-%EF%BC%88bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%89"><span class="nav-number">1.1.9.</span> <span class="nav-text">IOC 操作 Bean 管理 （bean生命周期）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">1.1.9.0.1.</span> <span class="nav-text">1.生命周期</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">1.1.9.0.2.</span> <span class="nav-text">2.bean生命周期</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E6%BC%94%E7%A4%BAbean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">1.1.9.0.3.</span> <span class="nav-text">3.演示bean的生命周期</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-bean%E7%9A%84%E5%90%8E%E7%BD%AE%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%8C%E5%8A%A0%E4%B8%8A%E5%90%8E%E5%85%B17%E6%AD%A5"><span class="nav-number">1.1.9.0.4.</span> <span class="nav-text">4.bean的后置处理器，加上后共7步</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-%E6%BC%94%E7%A4%BA%E6%B7%BB%E5%8A%A0%E5%90%8E%E7%BD%AE%E5%A4%84%E7%90%86%E5%99%A8%E6%95%88%E6%9E%9C"><span class="nav-number">1.1.9.0.5.</span> <span class="nav-text">5.演示添加后置处理器效果</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88xml%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%EF%BC%89"><span class="nav-number">1.1.10.</span> <span class="nav-text">IOC 操作 Bean 管理（xml自动装配）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="nav-number">1.1.10.0.1.</span> <span class="nav-text">1. 什么是自动装配</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E6%BC%94%E7%A4%BA%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E8%BF%87%E7%A8%8Bf"><span class="nav-number">1.1.10.0.2.</span> <span class="nav-text">2. 演示自动装配过程f</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6%EF%BC%89"><span class="nav-number">1.1.11.</span> <span class="nav-text">IOC 操作 Bean 管理（引入外部属性文件）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E7%9B%B4%E6%8E%A5%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%A1%E6%81%AF"><span class="nav-number">1.1.11.0.1.</span> <span class="nav-text">1.直接配置数据库信息</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-number">1.1.11.0.2.</span> <span class="nav-text">2.引入外部属性文件配置数据库连接池</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%EF%BC%89"><span class="nav-number">1.1.12.</span> <span class="nav-text">IOC 操作 Bean 管理（基于注解方式）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.1.12.0.1.</span> <span class="nav-text">1.什么是注解</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-SpringBean%E7%AE%A1%E7%90%86%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E6%8F%90%E4%BE%9B%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.1.12.0.2.</span> <span class="nav-text">2.SpringBean管理中创建对象提供注解</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.1.12.0.3.</span> <span class="nav-text">3.基于注解方式实现对象</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-%E5%BC%80%E5%90%AF%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E7%BB%86%E8%8A%82%E9%85%8D%E7%BD%AE"><span class="nav-number">1.1.12.0.4.</span> <span class="nav-text">4.开启组件扫描细节配置</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5"><span class="nav-number">1.1.12.0.5.</span> <span class="nav-text">5.基于注解方式实现属性注入</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#6-%E7%BA%AF%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="nav-number">1.1.12.0.6.</span> <span class="nav-text">6.纯注解开发</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AOP"><span class="nav-number">1.2.</span> <span class="nav-text">AOP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#AOP%EF%BC%88%E6%A6%82%E5%BF%B5%E5%8E%9F%E7%90%86%EF%BC%89"><span class="nav-number">1.2.1.</span> <span class="nav-text">AOP（概念原理）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFAOP"><span class="nav-number">1.2.1.0.1.</span> <span class="nav-text">1.什么是AOP</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AOP%EF%BC%88%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%EF%BC%89"><span class="nav-number">1.2.2.</span> <span class="nav-text">AOP（底层原理）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-AOP%E5%BA%95%E5%B1%82%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="nav-number">1.2.2.0.1.</span> <span class="nav-text">1.AOP底层使用动态代理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AOP-%E4%BD%BF%E7%94%A8JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="nav-number">1.2.3.</span> <span class="nav-text">AOP(使用JDK动态代理)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1%E3%80%81%E4%BD%BF%E7%94%A8-JDK-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%8C%E4%BD%BF%E7%94%A8-Proxy-%E7%B1%BB%E9%87%8C%E9%9D%A2%E7%9A%84%E6%96%B9%E6%B3%95%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.2.3.0.1.</span> <span class="nav-text">1、使用 JDK 动态代理，使用 Proxy 类里面的方法创建代理对象</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E8%B0%83%E7%94%A8newProxyInstans%E6%96%B9%E6%B3%95"><span class="nav-number">1.2.3.0.2.</span> <span class="nav-text">(1)调用newProxyInstans方法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E7%BC%96%E5%86%99-JDK-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E4%BB%A3%E7%A0%81"><span class="nav-number">1.2.3.0.3.</span> <span class="nav-text">2.编写 JDK 动态代理代码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AOP-%E6%9C%AF%E8%AF%AD"><span class="nav-number">1.2.4.</span> <span class="nav-text">AOP(术语)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E8%BF%9E%E6%8E%A5%E7%82%B9"><span class="nav-number">1.2.4.0.1.</span> <span class="nav-text">1.连接点</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%88%87%E5%85%A5%E7%82%B9"><span class="nav-number">1.2.4.0.2.</span> <span class="nav-text">2.切入点</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E9%80%9A%E7%9F%A5-%E5%A2%9E%E5%BC%BA"><span class="nav-number">1.2.4.0.3.</span> <span class="nav-text">3.通知(增强)</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-%E5%88%87%E9%9D%A2"><span class="nav-number">1.2.4.0.4.</span> <span class="nav-text">4.切面</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AOP%E6%93%8D%E4%BD%9C-%E5%87%86%E5%A4%87"><span class="nav-number">1.2.5.</span> <span class="nav-text">AOP操作(准备)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-Spring%E6%A1%86%E6%9E%B6%E4%B8%AD%E4%B8%80%E8%88%AC%E5%9F%BA%E4%BA%8EAspectJ%E5%AE%9E%E7%8E%B0AOP%E6%93%8D%E4%BD%9C"><span class="nav-number">1.2.5.0.1.</span> <span class="nav-text">1.Spring框架中一般基于AspectJ实现AOP操作</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%9F%BA%E4%BA%8EAspectJ%E5%AE%9E%E7%8E%B0AOP%E6%93%8D%E4%BD%9C"><span class="nav-number">1.2.5.0.2.</span> <span class="nav-text">2.基于AspectJ实现AOP操作</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E5%9C%A8%E9%A1%B9%E7%9B%AE%E5%B7%A5%E7%A8%8B%E9%87%8C%E9%9D%A2%E5%BC%95%E5%85%A5AOP%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96"><span class="nav-number">1.2.5.0.3.</span> <span class="nav-text">3.在项目工程里面引入AOP相关依赖</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.2.5.0.4.</span> <span class="nav-text">4.切入点表达式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AOP%E6%93%8D%E4%BD%9C-AspectJ%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.2.6.</span> <span class="nav-text">AOP操作(AspectJ注解)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E5%88%9B%E5%BB%BA%E7%B1%BB%EF%BC%8C%E5%9C%A8%E7%B1%BB%E4%B8%AD%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95"><span class="nav-number">1.2.6.0.1.</span> <span class="nav-text">1.创建类，在类中定义方法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%88%9B%E5%BB%BA%E5%A2%9E%E5%BC%BA%E7%B1%BB-%E7%BC%96%E5%86%99%E5%A2%9E%E5%BC%BA%E9%80%BB%E8%BE%91"><span class="nav-number">1.2.6.0.2.</span> <span class="nav-text">2.创建增强类(编写增强逻辑)</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E8%BF%9B%E8%A1%8C%E9%80%9A%E7%9F%A5%E9%85%8D%E7%BD%AE"><span class="nav-number">1.2.6.0.3.</span> <span class="nav-text">3.进行通知配置</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-%E9%85%8D%E7%BD%AE%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84%E9%80%9A%E7%9F%A5-5%E7%A7%8D%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.2.6.0.4.</span> <span class="nav-text">4.配置不同类型的通知(5种类型)</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-%E7%9B%B8%E5%90%8C%E5%88%87%E5%85%A5%E7%82%B9%E6%8A%BD%E5%8F%96"><span class="nav-number">1.2.6.0.5.</span> <span class="nav-text">5.相同切入点抽取</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#6-%E5%A4%9A%E4%B8%AA%E5%A2%9E%E5%BC%BA%E7%B1%BB%E5%AF%B9%E5%90%8C%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E5%A2%9E%E5%BC%BA%EF%BC%8C%E8%AE%BE%E7%BD%AE%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-number">1.2.6.0.6.</span> <span class="nav-text">6.多个增强类对同一个方法增强，设置优先级</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#7-%E5%AE%8C%E5%85%A8%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="nav-number">1.2.6.0.7.</span> <span class="nav-text">7.完全使用注解开发</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AOP%E6%93%8D%E4%BD%9C-AspectJ%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">1.2.7.</span> <span class="nav-text">AOP操作(AspectJ配置文件)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AA%E7%B1%BB%EF%BC%8C%E5%A2%9E%E5%BC%BA%E7%B1%BB%E5%92%8C%E8%A2%AB%E5%A2%9E%E5%BC%BA%E7%B1%BB%EF%BC%8C%E5%88%9B%E5%BB%BA%E6%96%B9%E6%B3%95"><span class="nav-number">1.2.7.0.1.</span> <span class="nav-text">1、创建两个类，增强类和被增强类，创建方法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2%E3%80%81%E5%9C%A8-spring-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AA%E7%B1%BB%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.2.7.0.2.</span> <span class="nav-text">2、在 spring 配置文件中创建两个类对象</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3%E3%80%81%E5%9C%A8-spring-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE%E5%88%87%E5%85%A5%E7%82%B9"><span class="nav-number">1.2.7.0.3.</span> <span class="nav-text">3、在 spring 配置文件中配置切入点</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JBDCTemplate"><span class="nav-number">1.3.</span> <span class="nav-text">JBDCTemplate</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#JDBCTemplate-%E6%A6%82%E5%BF%B5%E5%92%8C%E5%87%86%E5%A4%87"><span class="nav-number">1.3.1.</span> <span class="nav-text">JDBCTemplate(概念和准备)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFJDBCTemplate"><span class="nav-number">1.3.1.0.1.</span> <span class="nav-text">1.什么是JDBCTemplate</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">1.3.1.0.2.</span> <span class="nav-text">2.准备工作</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JDBCTemplate%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93-%EF%BC%88%E6%B7%BB%E5%8A%A0%E6%93%8D%E4%BD%9C%EF%BC%89"><span class="nav-number">1.3.2.</span> <span class="nav-text">JDBCTemplate操作数据库 （添加操作）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E5%AF%B9%E5%BA%94%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="nav-number">1.3.2.0.1.</span> <span class="nav-text">1.对应数据库表创建实体类</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E7%BC%96%E5%86%99Service%E5%92%8Cdao"><span class="nav-number">1.3.2.0.2.</span> <span class="nav-text">2.编写Service和dao</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="nav-number">1.3.2.0.3.</span> <span class="nav-text">3.测试类</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JDBCTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E4%BF%AE%E6%94%B9%E5%92%8C%E5%88%A0%E9%99%A4%EF%BC%89"><span class="nav-number">1.3.3.</span> <span class="nav-text">JDBCTemplate 操作数据库（修改和删除）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E4%BF%AE%E6%94%B9"><span class="nav-number">1.3.3.0.1.</span> <span class="nav-text">1.修改</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%88%A0%E9%99%A4"><span class="nav-number">1.3.3.0.2.</span> <span class="nav-text">2.删除</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JDBCTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E6%9F%90%E4%B8%AA%E5%80%BC%EF%BC%89"><span class="nav-number">1.3.4.</span> <span class="nav-text">JDBCTemplate 操作数据库（查询返回某个值）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E6%9F%A5%E8%AF%A2%E8%A1%A8%E4%B8%AD%E6%9C%89%E5%A4%9A%E5%B0%91%E8%AE%B0%E5%BD%95%EF%BC%8C%E8%BF%94%E5%9B%9E%E6%98%AF%E6%9F%90%E4%B8%AA%E5%80%BC"><span class="nav-number">1.3.4.0.1.</span> <span class="nav-text">1.查询表中有多少记录，返回是某个值</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8jdbcTemplate%E5%AE%9E%E7%8E%B0%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E6%9F%90%E4%B8%AA%E5%80%BC%E4%BB%A3%E7%A0%81"><span class="nav-number">1.3.4.0.2.</span> <span class="nav-text">2.使用jdbcTemplate实现查询返回某个值代码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JDBCTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1%EF%BC%89"><span class="nav-number">1.3.5.</span> <span class="nav-text">JDBCTemplate 操作数据库（查询返回对象）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E5%9C%BA%E6%99%AF%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%9B%BE%E4%B9%A6%E8%AF%A6%E6%83%85"><span class="nav-number">1.3.5.0.1.</span> <span class="nav-text">1.场景：查询图书详情</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-jdbcTemplate%E5%AE%9E%E7%8E%B0%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.3.5.0.2.</span> <span class="nav-text">2.jdbcTemplate实现查询返回对象</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JDBCTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E9%9B%86%E5%90%88%EF%BC%89"><span class="nav-number">1.3.6.</span> <span class="nav-text">JDBCTemplate 操作数据库（查询返回集合）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E5%9C%BA%E6%99%AF%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%9B%BE%E4%B9%A6%E5%88%97%E8%A1%A8%E5%88%86%E9%A1%B5%E2%80%A6"><span class="nav-number">1.3.6.0.1.</span> <span class="nav-text">1.场景：查询图书列表分页…</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-jdbcTemplate%E5%AE%9E%E7%8E%B0%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E9%9B%86%E5%90%88"><span class="nav-number">1.3.6.0.2.</span> <span class="nav-text">2.jdbcTemplate实现查询返回集合</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JDBCTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%EF%BC%89"><span class="nav-number">1.3.7.</span> <span class="nav-text">JDBCTemplate 操作数据库（批量操作）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%EF%BC%9A%E6%93%8D%E4%BD%9C%E8%A1%A8%E9%87%8C%E7%9A%84%E5%A4%9A%E6%9D%A1%E8%AE%B0%E5%BD%95"><span class="nav-number">1.3.7.0.1.</span> <span class="nav-text">批量操作：操作表里的多条记录</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#jdbcTemplate%E5%AE%9E%E7%8E%B0%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">1.3.7.0.2.</span> <span class="nav-text">jdbcTemplate实现批量操作的方法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E6%B7%BB%E5%8A%A0"><span class="nav-number">1.3.7.0.3.</span> <span class="nav-text">1.添加</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E4%BF%AE%E6%94%B9"><span class="nav-number">1.3.7.0.4.</span> <span class="nav-text">2.修改</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E5%88%A0%E9%99%A4"><span class="nav-number">1.3.7.0.5.</span> <span class="nav-text">3.删除</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1"><span class="nav-number">1.4.</span> <span class="nav-text">事务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%A6%82%E5%BF%B5"><span class="nav-number">1.4.1.</span> <span class="nav-text">事务概念</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1"><span class="nav-number">1.4.1.0.1.</span> <span class="nav-text">1.什么是事务</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E4%B8%AA%E7%89%B9%E6%80%A7%EF%BC%88ACID%EF%BC%89"><span class="nav-number">1.4.1.0.2.</span> <span class="nav-text">2.事务的四个特性（ACID）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E6%90%AD%E5%BB%BA%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%E7%8E%AF%E5%A2%83%EF%BC%89"><span class="nav-number">1.4.2.</span> <span class="nav-text">事务操作（搭建事务操作环境）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%EF%BC%8C%E6%B7%BB%E5%8A%A0%E8%AE%B0%E5%BD%95"><span class="nav-number">1.4.2.0.1.</span> <span class="nav-text">1.创建数据库表，添加记录</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%88%9B%E5%BB%BAservice-%E6%90%AD%E5%BB%BAdao%EF%BC%8C%E5%AE%8C%E6%88%90%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E5%92%8C%E6%B3%A8%E5%85%A5%E5%85%B3%E7%B3%BB"><span class="nav-number">1.4.2.0.2.</span> <span class="nav-text">2.创建service,搭建dao，完成对象创建和注入关系</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E5%9C%A8dao%E4%B8%AD%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AA%E6%96%B9%E6%B3%95%EF%BC%8C%E5%A4%9A%E9%92%B1%E5%92%8C%E5%B0%91%E9%92%B1%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%9C%A8service%E4%B8%AD%E5%88%9B%E5%BB%BA%E6%96%B9%E6%B3%95%EF%BC%88%E8%BD%AC%E8%B4%A6%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%89"><span class="nav-number">1.4.2.0.3.</span> <span class="nav-text">3.在dao中创建两个方法，多钱和少钱的方法，在service中创建方法（转账的方法）</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-%E4%B8%8A%E9%9D%A2%E4%BB%A3%E7%A0%81%EF%BC%8C%E6%AD%A3%E5%B8%B8%E6%89%A7%E8%A1%8C%E6%B2%A1%E6%9C%89%E9%97%AE%E9%A2%98%EF%BC%8C%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%87%BA%E7%8E%B0%E5%BC%82%E5%B8%B8%EF%BC%8C%E4%BB%A3%E7%A0%81%E4%BC%9A%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98"><span class="nav-number">1.4.2.0.4.</span> <span class="nav-text">4.上面代码，正常执行没有问题，执行过程中出现异常，代码会出现问题</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C-Spring-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.4.3.</span> <span class="nav-text">事务操作(Spring 事务管理介绍)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E4%BA%8B%E5%8A%A1%E4%B8%80%E8%88%AC%E6%B7%BB%E5%8A%A0%E5%88%B0JavaEE%E4%B8%89%E5%B1%82%E7%BB%93%E6%9E%84%E7%9A%84Service%E5%B1%82%EF%BC%88%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%B1%82%EF%BC%89"><span class="nav-number">1.4.3.0.1.</span> <span class="nav-text">1.事务一般添加到JavaEE三层结构的Service层（业务逻辑层）</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%9C%A8Spring-%E8%BF%9B%E8%A1%8C%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E6%93%8D%E4%BD%9C"><span class="nav-number">1.4.3.0.2.</span> <span class="nav-text">2.在Spring 进行事务管理操作</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="nav-number">1.4.3.0.3.</span> <span class="nav-text">3.声明式事务管理</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-%E5%9C%A8Spring%E8%BF%9B%E8%A1%8C%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%8C%E5%BA%95%E5%B1%82%E4%BD%BF%E7%94%A8AOP%E5%8E%9F%E7%90%86"><span class="nav-number">1.4.3.0.4.</span> <span class="nav-text">4.在Spring进行声明式事务管理，底层使用AOP原理</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-Spring-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86API"><span class="nav-number">1.4.3.0.5.</span> <span class="nav-text">5.Spring 事务管理API</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C-%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="nav-number">1.4.4.</span> <span class="nav-text">事务操作(注解声明式事务管理)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E5%9C%A8Spring%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8"><span class="nav-number">1.4.4.0.1.</span> <span class="nav-text">1.在Spring的配置文件中配置事务管理器</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%9C%A8Spring-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E5%BC%80%E5%90%AF%E4%BA%8B%E5%8A%A1%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.4.4.0.2.</span> <span class="nav-text">2.在Spring 配置文件中开启事务注解</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E5%9C%A8service%E7%B1%BB%E4%B8%8A%E9%9D%A2%EF%BC%88%E6%88%96%E8%80%85service%E7%B1%BB%E9%87%8C%E9%9D%A2%E6%96%B9%E6%B3%95%E4%B8%8A%E9%9D%A2%EF%BC%89%E6%B7%BB%E5%8A%A0%E4%BA%8B%E5%8A%A1%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.4.4.0.3.</span> <span class="nav-text">3.在service类上面（或者service类里面方法上面）添加事务注解</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE"><span class="nav-number">1.4.5.</span> <span class="nav-text">事务操作(声明式事务管理参数配置)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1%E3%80%81%E5%9C%A8-service-%E7%B1%BB%E4%B8%8A%E9%9D%A2%E6%B7%BB%E5%8A%A0%E6%B3%A8%E8%A7%A3-Transactional%EF%BC%8C%E5%9C%A8%E8%BF%99%E4%B8%AA%E6%B3%A8%E8%A7%A3%E9%87%8C%E9%9D%A2%E5%8F%AF%E4%BB%A5%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%9B%B8%E5%85%B3%E5%8F%82%E6%95%B0"><span class="nav-number">1.4.5.0.1.</span> <span class="nav-text">1、在 service 类上面添加注解@Transactional，在这个注解里面可以配置事务相关参数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-propagation%EF%BC%9A%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA"><span class="nav-number">1.4.5.0.2.</span> <span class="nav-text">2.propagation：事务传播行为</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-isolation%EF%BC%9A%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E6%95%B0"><span class="nav-number">1.4.5.0.3.</span> <span class="nav-text">3.isolation：事务隔离级数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-timeout%EF%BC%9A%E8%B6%85%E5%87%BA%E6%97%B6%E9%97%B4"><span class="nav-number">1.4.5.0.4.</span> <span class="nav-text">4.timeout：超出时间</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-readOnly%EF%BC%9A%E6%98%AF%E5%90%A6%E5%8F%AA%E8%AF%BB"><span class="nav-number">1.4.5.0.5.</span> <span class="nav-text">5.readOnly：是否只读</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#6-rollbackFor%EF%BC%9A%E5%9B%9E%E6%BB%9A"><span class="nav-number">1.4.5.0.6.</span> <span class="nav-text">6.rollbackFor：回滚</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#7-noRollbackFor%EF%BC%9A%E4%B8%8D%E5%9B%9E%E6%BB%9A"><span class="nav-number">1.4.5.0.7.</span> <span class="nav-text">7.noRollbackFor：不回滚</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C-xml%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="nav-number">1.4.6.</span> <span class="nav-text">事务操作(xml声明式事务管理)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E5%9C%A8Spring%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E8%BF%9B%E8%A1%8C%E9%85%8D%E7%BD%AE"><span class="nav-number">1.4.6.0.1.</span> <span class="nav-text">1.在Spring配置文件中进行配置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%89"><span class="nav-number">1.4.7.</span> <span class="nav-text">事务操作（完全注解声明式事务管理）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E5%88%9B%E5%BB%BA%E9%85%8D%E7%BD%AE%E7%B1%BB%EF%BC%8C%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE%E7%B1%BB%E4%BB%A3%E6%9B%BFxml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">1.4.7.0.1.</span> <span class="nav-text">1.创建配置类，使用配置类代替xml配置文件</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring5-%E6%A1%86%E6%9E%B6%E6%96%B0%E5%8A%9F%E8%83%BD"><span class="nav-number">1.5.</span> <span class="nav-text">Spring5 框架新功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%95%B4%E4%B8%AASpring5%E6%A1%86%E6%9E%B6%E5%9F%BA%E4%BA%8Ejava8%EF%BC%8C%E8%BF%90%E8%A1%8C%E6%97%B6%E5%85%BC%E5%AE%B9JDK9%EF%BC%8C%E8%AE%B8%E5%A4%9A%E4%B8%8D%E5%BB%BA%E8%AE%AE%E4%BD%BF%E7%94%A8%E7%9A%84%E7%B1%BB%E5%92%8C%E6%96%B9%E6%B3%95%E5%9C%A8%E4%BB%A3%E7%A0%81%E5%BA%93%E4%B8%AD%E5%88%A0%E9%99%A4%E6%8E%89%E4%BA%86"><span class="nav-number">1.5.1.</span> <span class="nav-text">1.整个Spring5框架基于java8，运行时兼容JDK9，许多不建议使用的类和方法在代码库中删除掉了</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E8%87%AA%E5%B8%A6%E4%BA%86%E9%80%9A%E7%94%A8%E7%9A%84%E6%97%A5%E5%BF%97%E5%B0%81%E8%A3%85"><span class="nav-number">1.5.2.</span> <span class="nav-text">2.自带了通用的日志封装</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-Spring5%E5%B7%B2%E7%BB%8F%E7%A7%BB%E9%99%A4Log4jConfigListener%EF%BC%8C%E5%AE%98%E6%96%B9%E5%BB%BA%E8%AE%AE%E4%BD%BF%E7%94%A8Log4j2"><span class="nav-number">1.5.2.0.1.</span> <span class="nav-text">(1)Spring5已经移除Log4jConfigListener，官方建议使用Log4j2</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-Spring5%E6%A1%86%E6%9E%B6%E6%95%B4%E5%90%88Log4j2"><span class="nav-number">1.5.2.0.2.</span> <span class="nav-text">(2)Spring5框架整合Log4j2</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Spring5-%E6%A1%86%E6%9E%B6%E6%A0%B8%E5%BF%83%E5%AE%B9%E5%99%A8%E6%94%AF%E6%8C%81-Nullable-%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.5.3.</span> <span class="nav-text">3.Spring5 框架核心容器支持***@Nullable*** 注解</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-Nullable-%E6%B3%A8%E8%A7%A3%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%9C%A8%E6%96%B9%E6%B3%95%E4%B8%8A%E9%9D%A2%EF%BC%8C%E5%B1%9E%E6%80%A7%E4%B8%8A%E9%9D%A2%EF%BC%8C%E5%8F%82%E6%95%B0%E4%B8%8A%E9%9D%A2%EF%BC%8C%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95%E8%BF%94%E5%9B%9E%E5%8F%AF%E4%BB%A5%E4%B8%BA%E7%A9%BA%EF%BC%8C%E5%B1%9E%E6%80%A7%E5%80%BC%E5%8F%AF%E4%BB%A5-%E4%B8%BA%E7%A9%BA%EF%BC%8C%E5%8F%82%E6%95%B0%E5%80%BC%E5%8F%AF%E4%BB%A5%E4%B8%BA%E7%A9%BA"><span class="nav-number">1.5.3.0.1.</span> <span class="nav-text">(1)@Nullable 注解可以使用在方法上面，属性上面，参数上面，表示方法返回可以为空，属性值可以 为空，参数值可以为空</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E6%B3%A8%E8%A7%A3%E7%94%A8%E5%9C%A8%E6%96%B9%E6%B3%95%E4%B8%8A%E9%9D%A2%EF%BC%8C%E6%96%B9%E6%B3%95%E8%BF%94%E5%9B%9E%E5%80%BC%E5%8F%AF%E4%BB%A5%E4%B8%BA%E7%A9%BA"><span class="nav-number">1.5.3.0.2.</span> <span class="nav-text">(2)注解用在方法上面，方法返回值可以为空</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E5%9C%A8%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E9%87%8C%E9%9D%A2%EF%BC%8C%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E5%8F%AF%E4%BB%A5%E4%B8%BA%E7%A9%BA"><span class="nav-number">1.5.3.0.3.</span> <span class="nav-text">(3)注解使用在方法参数里面，方法参数可以为空</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E5%9C%A8%E5%B1%9E%E6%80%A7%E4%B8%8A%E9%9D%A2%EF%BC%8C%E5%B1%9E%E6%80%A7%E5%80%BC%E5%8F%AF%E4%BB%A5%E4%B8%BA%E7%A9%BA"><span class="nav-number">1.5.3.0.4.</span> <span class="nav-text">(4)注解使用在属性上面，属性值可以为空</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81Spring5-%E6%A0%B8%E5%BF%83%E5%AE%B9%E5%99%A8%E6%94%AF%E6%8C%81%E5%87%BD%E6%95%B0%E5%BC%8F%E9%A3%8E%E6%A0%BC-GenericApplicationContext"><span class="nav-number">1.5.4.</span> <span class="nav-text">4、Spring5 核心容器支持函数式风格 GenericApplicationContext</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-Spring5-%E6%94%AF%E6%8C%81%E6%95%B4%E5%90%88JUnit5"><span class="nav-number">1.5.5.</span> <span class="nav-text">5.Spring5 支持整合JUnit5</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E6%95%B4%E5%90%88JUnit4"><span class="nav-number">1.5.5.0.1.</span> <span class="nav-text">(1)整合JUnit4</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E6%95%B4%E5%90%88JUnit5"><span class="nav-number">1.5.5.0.2.</span> <span class="nav-text">(2)整合JUnit5</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-SpringWebflux%EF%BC%88%E5%BE%85%E5%AE%8C%E6%88%90%EF%BC%89"><span class="nav-number">1.5.6.</span> <span class="nav-text">6.SpringWebflux（待完成）</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.5.6.0.1.</span> <span class="nav-text">1.介绍</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B"><span class="nav-number">1.5.6.0.2.</span> <span class="nav-text">2.响应式编程</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-Webflux%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%92%8C%E6%A0%B8%E5%BF%83API"><span class="nav-number">1.5.6.0.3.</span> <span class="nav-text">3.Webflux执行流程和核心API</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-SpringWebflux%EF%BC%88%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B%EF%BC%89"><span class="nav-number">1.5.6.0.4.</span> <span class="nav-text">4.SpringWebflux（基于注解编程模型）</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-SpringWebflux%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B%EF%BC%89"><span class="nav-number">1.5.6.0.5.</span> <span class="nav-text">5.SpringWebflux（基于函数式编程模型）</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="作者：Zwanan"
      src="/uploads/custom-logo.png">
  <p class="site-author-name" itemprop="name">作者：Zwanan</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Zwanan-github" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Zwanan-github" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:270603801@gmail.com" title="E-Mail → mailto:270603801@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://user.qzone.qq.com/270603801" title="qq空间 → https:&#x2F;&#x2F;user.qzone.qq.com&#x2F;270603801" rel="noopener" target="_blank"><i class="fab fa-qq fa-fw"></i>qq空间</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/weixin_64335340" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_64335340" rel="noopener" target="_blank"><i class="fab fa-csdn fa-fw"></i>CSDN</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/11/01/Spring5%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/custom-logo.png">
      <meta itemprop="name" content="作者：Zwanan">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zwanan的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Spring5 | Zwanan的博客">
      <meta itemprop="description" content="Spring5的学习笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Spring5
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-11-01 12:30:56 / 修改时间：12:45:20" itemprop="dateCreated datePublished" datetime="2022-11-01T12:30:56+08:00">2022-11-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">Spring5的学习笔记</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="Spring5"><a href="#Spring5" class="headerlink" title="Spring5"></a>Spring5</h2><h3 id="IOC"><a href="#IOC" class="headerlink" title="IOC"></a>IOC</h3><h4 id="IOC-概念原理"><a href="#IOC-概念原理" class="headerlink" title="IOC(概念原理)"></a>IOC(概念原理)</h4><h5 id="1-什么是IOC"><a href="#1-什么是IOC" class="headerlink" title="1.什么是IOC"></a>1.什么是IOC</h5><h6 id="1-控制反转，把对象创建和对象之间的调用过程，交给spring进行管理"><a href="#1-控制反转，把对象创建和对象之间的调用过程，交给spring进行管理" class="headerlink" title="(1)控制反转，把对象创建和对象之间的调用过程，交给spring进行管理"></a>(1)控制反转，把对象创建和对象之间的调用过程，交给spring进行管理</h6><h6 id="2-使用IOC目的：降低耦合"><a href="#2-使用IOC目的：降低耦合" class="headerlink" title="(2)使用IOC目的：降低耦合"></a>(2)使用IOC目的：降低耦合</h6><h5 id="2-IOC底层原理"><a href="#2-IOC底层原理" class="headerlink" title="2.IOC底层原理"></a>2.IOC底层原理</h5><h6 id="1-xml解析，工厂模式，反射"><a href="#1-xml解析，工厂模式，反射" class="headerlink" title="(1)xml解析，工厂模式，反射"></a>(1)xml解析，工厂模式，反射</h6><p><img src="D:\SuchAllDir\文件夹\偷盗抢到的学习资料\spring5\笔记\分析图\图1.png" alt="图1"></p>
<p><img src="D:\SuchAllDir\文件夹\偷盗抢到的学习资料\spring5\笔记\分析图\图2.png" alt="图2"></p>
<h6 id="2-ioc过程"><a href="#2-ioc过程" class="headerlink" title="(2)ioc过程"></a>(2)ioc过程</h6><p>第一步，xml配置文件，配置创建的对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;dao&quot;</span> class=<span class="string">&quot;com.***.UserDao&quot;</span>&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<p>第二步，有service类和dao类，创建工厂类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserFactory</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> UserDao <span class="title function_">getDao</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">classValue</span> <span class="operator">=</span> class属性值；<span class="comment">//xml解析、</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(classValue);<span class="comment">//反射创建对象</span></span><br><span class="line">        <span class="keyword">return</span> (UserDao)clazz.newInstance();<span class="comment">//返回对象</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="IOC-接口"><a href="#IOC-接口" class="headerlink" title="IOC(接口)"></a>IOC(接口)</h4><h6 id="1-IOC思想基于IOC容器完成，IOC容器底层就是工厂模式"><a href="#1-IOC思想基于IOC容器完成，IOC容器底层就是工厂模式" class="headerlink" title="1.IOC思想基于IOC容器完成，IOC容器底层就是工厂模式"></a>1.IOC思想基于IOC容器完成，IOC容器底层就是工厂模式</h6><h6 id="2-Spring提供IOC容器实现俩种接口："><a href="#2-Spring提供IOC容器实现俩种接口：" class="headerlink" title="2.Spring提供IOC容器实现俩种接口："></a>2.Spring提供IOC容器实现俩种接口：</h6><p>(1)BeanFactory：IOC容器基本实现，不建议使用。</p>
<p>*加载配置文件的时候不会创建对象，在获取或者使用的时候才创建。</p>
<p>(2)ApplicationContext：BeanFactory接口的子接口，提供更多更强的功能。</p>
<p>*加载配置文件的时候就会把对象完成创建。</p>
<h6 id="3-ApplicationContext接口有实现类"><a href="#3-ApplicationContext接口有实现类" class="headerlink" title="3.ApplicationContext接口有实现类"></a>3.ApplicationContext接口有实现类</h6><p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220714191554234.png" alt="image-20220714191554234"></p>
<h4 id="操作Bean管理（概念）"><a href="#操作Bean管理（概念）" class="headerlink" title="操作Bean管理（概念）"></a>操作Bean管理（概念）</h4><h6 id="1-什么是Bean管理"><a href="#1-什么是Bean管理" class="headerlink" title="1.什么是Bean管理"></a>1.什么是Bean管理</h6><p>(0)Bean管理指两个操作</p>
<p>(1)Spring创建对象</p>
<p>(2)Spring注入对象</p>
<h6 id="2-两种管理操作"><a href="#2-两种管理操作" class="headerlink" title="2.两种管理操作"></a>2.两种管理操作</h6><p>(1)基于xml配置文件</p>
<p>(2)基于注解</p>
<h4 id="操作Bean-基于xml"><a href="#操作Bean-基于xml" class="headerlink" title="操作Bean(基于xml)"></a>操作Bean(基于xml)</h4><h6 id="1-基于xml创建对象"><a href="#1-基于xml创建对象" class="headerlink" title="1.基于xml创建对象"></a>1.基于xml创建对象</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置User对象创建--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>(1)在Spring配置文件中，使用bean标签，添加对应属性，就可以实现对象创建</p>
<p>(2)在bean中常用的标签</p>
<p>*id属性，唯一标识</p>
<p>*class属性，类全路径</p>
<p>(3)创建对象的时候，默认执行无参构造</p>
<h6 id="2-基于xml方式注入属性"><a href="#2-基于xml方式注入属性" class="headerlink" title="2.基于xml方式注入属性"></a>2.基于xml方式注入属性</h6><p>(1)DI:依赖注入，注入属性</p>
<h6 id="3-第一种：使用set方法进行注入"><a href="#3-第一种：使用set方法进行注入" class="headerlink" title="3.第一种：使用set方法进行注入"></a>3.第一种：使用set方法进行注入</h6><p>(1)类的属性和set方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String bName;</span><br><span class="line">    <span class="keyword">private</span> String bAuthor;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setbName</span><span class="params">(String bName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bName = bName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setbAuthor</span><span class="params">(String bAuthor)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bAuthor = bAuthor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(2)在Spring配置文件中配置对象创建，配置属性注入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--1 配置User对象创建--&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--&lt;bean id=&quot;user&quot; class=&quot;com.Zwan.spring5.User&quot;&gt;&lt;/bean&gt;--&gt;</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">&lt;!--2 set方法注入属性--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.Book&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--使用property完成属性注入--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;hello&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bAuthor&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Zwan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="4-第二种：带参构造方法"><a href="#4-第二种：带参构造方法" class="headerlink" title="4.第二种：带参构造方法"></a>4.第二种：带参构造方法</h6><p>(1)创建类，定义属性，创造属性对应有参数构造方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String oname;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="comment">//代餐构造</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Orders</span><span class="params">(String oname, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.oname = oname;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(2)在Spring配置文件中配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;orders&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.Orders&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;oname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;电脑&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;武穴&quot;</span>/&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--&lt;constructor-arg index=&quot;0&quot; value=&quot;&quot;&gt;&lt;/constructor-arg&gt;--&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--index是传参的第i个--&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="5-p名称空间注入"><a href="#5-p名称空间注入" class="headerlink" title="5.p名称空间注入"></a>5.p名称空间注入</h6><p>(1)使用p名称空间注入，可以简化基于xml配置方式</p>
<p>第一步 在配置文件添加p名称空间</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第二步 进行属性注入，在bean标签里面进行操作</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.Book&quot;</span> <span class="attr">p:bName</span>=<span class="string">&quot;Zwanan&quot;</span> <span class="attr">p:bAuthor</span>=<span class="string">&quot;hello&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="IOC操作Bean管理-xml注入其他类型属性"><a href="#IOC操作Bean管理-xml注入其他类型属性" class="headerlink" title="IOC操作Bean管理(xml注入其他类型属性)"></a>IOC操作Bean管理(xml注入其他类型属性)</h4><h6 id="1-字面量"><a href="#1-字面量" class="headerlink" title="1.字面量"></a>1.字面量</h6><p>(1)null值</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;adress&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>(2)属性值包含特殊符号</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--包含特殊符号</span></span><br><span class="line"><span class="comment">    1. &amp;lt;或&amp;gt;转义</span></span><br><span class="line"><span class="comment">    2. 把带特殊符号的写道CDATA中</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;adress&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>&lt;![CDATA[&lt;&lt;南京&gt;&gt;]]&gt;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="2-注入属性-外部bean"><a href="#2-注入属性-外部bean" class="headerlink" title="2.注入属性-外部bean"></a>2.注入属性-外部bean</h6><p>(1)创建两个service类和dao类</p>
<p>(2)在service调用dao里面的方法</p>
<p>(3)在配置文件中配置属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//创建UserDao属性，生成set方法</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserService---add&quot;</span>);</span><br><span class="line">        userDao.update();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.service.UserService&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入userDao对象</span></span><br><span class="line"><span class="comment">        ref:创建userDao对象bean标签id值</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.dao.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h6 id="3-注入属性-内部bean和级联赋值"><a href="#3-注入属性-内部bean和级联赋值" class="headerlink" title="3.注入属性-内部bean和级联赋值"></a>3.注入属性-内部bean和级联赋值</h6><p>(1)一对多关系：部门和员工</p>
<p>(2)实体类中表示一对多关系</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//部门类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dept</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String dname;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDname</span><span class="params">(String dname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dname = dname;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//员工类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Emp</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String ename;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> Dept dept;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEname</span><span class="params">(String ename)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.ename = ename;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDept</span><span class="params">(Dept dept)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dept = dept;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(3)在配置文件中配置属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--内部bean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置两个普通属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lucy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置对象类型属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;保安部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="4-注入属性-级联赋值"><a href="#4-注入属性-级联赋值" class="headerlink" title="4.注入属性-级联赋值"></a>4.注入属性-级联赋值</h6><p>(1)第一种写法</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--级联复制--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置两个普通属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lucy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--级联复制--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;保安部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>(2)第二种写法(需要生成get方法才行)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--级联复制--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置两个普通属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lucy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--级联复制--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--通过get方法--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept.dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;技术部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;保安部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="IOC-操作-Bean-管理（xml注入集合属性）"><a href="#IOC-操作-Bean-管理（xml注入集合属性）" class="headerlink" title="IOC 操作 Bean 管理（xml注入集合属性）"></a>IOC 操作 Bean 管理（xml注入集合属性）</h4><h6 id="1-注入数组类型的属性"><a href="#1-注入数组类型的属性" class="headerlink" title="1.注入数组类型的属性"></a>1.注入数组类型的属性</h6><h6 id="2-注入List集合属性"><a href="#2-注入List集合属性" class="headerlink" title="2.注入List集合属性"></a>2.注入List集合属性</h6><h6 id="3-注入Map集合类型属性"><a href="#3-注入Map集合类型属性" class="headerlink" title="3.注入Map集合类型属性"></a>3.注入Map集合类型属性</h6><p>(1)创建对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Stu</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String[] cource;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; maps;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setList</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMaps</span><span class="params">(Map&lt;String, String&gt; maps)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.maps = maps;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCource</span><span class="params">(String[] cource)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cource = cource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(2)在Spring配置文件中配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--1 集合类型属性注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stu&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.collectiontype.Stu&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cource&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>java<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>sql<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>list1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>list2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maps&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;one&quot;</span> <span class="attr">value</span>=<span class="string">&quot;第一&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;two&quot;</span> <span class="attr">value</span>=<span class="string">&quot;第二&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sets&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>one<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>two<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="4-在集合中设置对象属性"><a href="#4-在集合中设置对象属性" class="headerlink" title="4.在集合中设置对象属性"></a>4.在集合中设置对象属性</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注入list集合类型，值是对象--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courseList&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;course1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;course2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--创建多个course对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;course1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.collectiontype.Course&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;course2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.collectiontype.Course&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring5.2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h6 id="5-把集合注入部分取出来"><a href="#5-把集合注入部分取出来" class="headerlink" title="5.把集合注入部分取出来"></a>5.把集合注入部分取出来</h6><p>(1)在xml配置中引入名称空间</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/util  http://www.springframework.org/schema/util/spring-util.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>(2)使用util标签提取List集合注入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--1 提取List集合类型属性注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">util:list</span> <span class="attr">id</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>one<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>two<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>three<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">util:list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--提取list属性注入使用--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.collectiontype.Book&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="IOC-操作-Bean-管理-（FactoryBean）"><a href="#IOC-操作-Bean-管理-（FactoryBean）" class="headerlink" title="IOC 操作 Bean 管理 （FactoryBean）"></a>IOC 操作 Bean 管理 （FactoryBean）</h4><h6 id="1-Spring中有两种bean-一种普通bean-一种工厂bean-FactoryBean"><a href="#1-Spring中有两种bean-一种普通bean-一种工厂bean-FactoryBean" class="headerlink" title="1.Spring中有两种bean,一种普通bean,一种工厂bean(FactoryBean)"></a>1.Spring中有两种bean,一种普通bean,一种工厂bean(FactoryBean)</h6><h6 id="2-普通bean：在配置文件中定义bean类型就是返回类型"><a href="#2-普通bean：在配置文件中定义bean类型就是返回类型" class="headerlink" title="2.普通bean：在配置文件中定义bean类型就是返回类型"></a>2.普通bean：在配置文件中定义bean类型就是返回类型</h6><h6 id="3-工厂bean：在配置文件定义的bean类型可以和返回类型不一样"><a href="#3-工厂bean：在配置文件定义的bean类型可以和返回类型不一样" class="headerlink" title="3.工厂bean：在配置文件定义的bean类型可以和返回类型不一样"></a>3.工厂bean：在配置文件定义的bean类型可以和返回类型不一样</h6><p>第一步： 创建类，让这个类作为工厂类，实现接口FactoryBean</p>
<p>第二步：实现接口的方法，在实现的方法中定义返回的类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> FactoryBean.<span class="built_in">super</span>.isSingleton();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定义返回bean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Course</span> <span class="variable">course</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Course</span>();</span><br><span class="line">        <span class="keyword">return</span> course;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;bean id=<span class="string">&quot;myBean&quot;</span> class=<span class="string">&quot;com.Zwan.spring5.factorybean.MyBean&quot;</span>&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="IOC-操作-Bean-管理-（bean作用域）"><a href="#IOC-操作-Bean-管理-（bean作用域）" class="headerlink" title="IOC 操作 Bean 管理 （bean作用域）"></a>IOC 操作 Bean 管理 （bean作用域）</h4><h6 id="1-在Spring里面，设置创建bean实例是单实例还是多实例"><a href="#1-在Spring里面，设置创建bean实例是单实例还是多实例" class="headerlink" title="1.在Spring里面，设置创建bean实例是单实例还是多实例"></a>1.在Spring里面，设置创建bean实例是单实例还是多实例</h6><h6 id="2-在Spring里面-bean是单实例对象"><a href="#2-在Spring里面-bean是单实例对象" class="headerlink" title="2.在Spring里面,bean是单实例对象"></a>2.在Spring里面,bean是单实例对象</h6><blockquote>
<p>com.Zwan.spring5.collectiontype.Book@35a50a4c<br>com.Zwan.spring5.collectiontype.Book@35a50a4c</p>
<p>地址相同，单实例对象</p>
</blockquote>
<h6 id="3-如何设置单实例还是多实例"><a href="#3-如何设置单实例还是多实例" class="headerlink" title="3.如何设置单实例还是多实例"></a>3.如何设置单实例还是多实例</h6><p>(1)在Spring配置文件bean标签里面有属性(scope)用于设置单实例还是多实例</p>
<p>(2)scope属性值</p>
<p>第一个值 默认值， singleton,表示是单例对象</p>
<p>第二个值 prototype,表示多实例对象</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--提取list属性注入使用--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.collectiontype.Book&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>com.Zwan.spring5.collectiontype.Book@35a50a4c<br>com.Zwan.spring5.collectiontype.Book@1f021e6c</p>
<p>地址不同了</p>
</blockquote>
<p>(3)singleton和prototype</p>
<p>第一 单实例 多实例</p>
<p>第二 设置scope值是singleton时候，加载Spring配置文件的时候就会创建单例对象</p>
<p>​		 设置prototype时候，不是在加载Spring配置文件的时候创建对象，在调用getBean方法的时候创建多实例对象</p>
<h4 id="IOC-操作-Bean-管理-（bean生命周期）"><a href="#IOC-操作-Bean-管理-（bean生命周期）" class="headerlink" title="IOC 操作 Bean 管理 （bean生命周期）"></a>IOC 操作 Bean 管理 （bean生命周期）</h4><h6 id="1-生命周期"><a href="#1-生命周期" class="headerlink" title="1.生命周期"></a>1.生命周期</h6><p>(1)从创建到销毁的过程</p>
<h6 id="2-bean生命周期"><a href="#2-bean生命周期" class="headerlink" title="2.bean生命周期"></a>2.bean生命周期</h6><p>(1) 通过构造器创建bean实例 (无参构造)</p>
<p>(2) 为bean的属性构造设置值和对其他bean引用 (调用set方法)</p>
<p>(3) 调用bean的初始化的方法 (需要进行配置)</p>
<p>(4) bean可以使用（获取到了）</p>
<p>(5) 当容器关闭时候，调用bean的销毁的方法 (需要进行配置销毁的方法)</p>
<h6 id="3-演示bean的生命周期"><a href="#3-演示bean的生命周期" class="headerlink" title="3.演示bean的生命周期"></a>3.演示bean的生命周期</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String oname;</span><br><span class="line">    <span class="comment">//无参构造</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Orders</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;1.无参构造&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOname</span><span class="params">(String oname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.oname = oname;</span><br><span class="line">        System.out.println(<span class="string">&quot;2.注入&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//创建执行的初始化方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initMethod</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;3.执行初始化&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyMethod</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;5.销毁方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;bean id=<span class="string">&quot;orders&quot;</span> class=<span class="string">&quot;com.Zwan.spring5.bean.Orders&quot;</span> init-method=<span class="string">&quot;initMethod&quot;</span> destroy-method=<span class="string">&quot;destroyMethod&quot;</span>&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;oname&quot;</span> value=<span class="string">&quot;手机&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCollection4</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean4.xml&quot;</span>);</span><br><span class="line">    <span class="type">Orders</span> <span class="variable">orders</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;orders&quot;</span>,Orders.class);</span><br><span class="line">    System.out.println(<span class="string">&quot;4.获取到对象&quot;</span>);</span><br><span class="line">    System.out.println(orders);    </span><br><span class="line">    <span class="comment">//手动销毁bean</span></span><br><span class="line">    ((ClassPathXmlApplicationContext) context).close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出：</p>
<blockquote>
<p>1.无参构造<br>2.注入<br>3.执行初始化<br>4.获取到对象<br>com.Zwan.spring5.bean.Orders@4e718207<br>5.销毁方法</p>
</blockquote>
<h6 id="4-bean的后置处理器，加上后共7步"><a href="#4-bean的后置处理器，加上后共7步" class="headerlink" title="4.bean的后置处理器，加上后共7步"></a>4.bean的后置处理器，加上后共7步</h6><p>(1) 通过构造器创建bean实例 (无参构造)</p>
<p>(2) 为bean的属性构造设置值和对其他bean引用 (调用set方法)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">postProcessBeforeInitialization</span><br></pre></td></tr></table></figure>

<p>(3) 把bean实例传递bean后置处理器的方法</p>
<p>(4) 调用bean的初始化的方法 (需要进行配置)</p>
<p>(5) 把bean实例传递bean后置处理器的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">postProcessAfterInitialization</span><br></pre></td></tr></table></figure>

<p>(6) bean可以使用（获取到了）</p>
<p>(7) 当容器关闭时候，调用bean的销毁的方法 (需要进行配置销毁的方法)</p>
<h6 id="5-演示添加后置处理器效果"><a href="#5-演示添加后置处理器效果" class="headerlink" title="5.演示添加后置处理器效果"></a>5.演示添加后置处理器效果</h6><p>(1)创建类，实现接口BeanPostProcessor,创建</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanPost</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException 	  &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在初始化之前执行的方法&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException 	 &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;初始化后的方法&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;!--配置后置处理器--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;myBeanPost&quot;</span> class=<span class="string">&quot;com.Zwan.spring5.bean.MyBeanPost&quot;</span>&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<blockquote>
<p>1.无参构造<br>2.注入<br>在初始化之前执行的方法<br>3.执行初始化<br>初始化后的方法<br>4.获取到对象<br>com.Zwan.spring5.bean.Orders@13eb8acf<br>5.销毁方法</p>
</blockquote>
<h4 id="IOC-操作-Bean-管理（xml自动装配）"><a href="#IOC-操作-Bean-管理（xml自动装配）" class="headerlink" title="IOC 操作 Bean 管理（xml自动装配）"></a>IOC 操作 Bean 管理（xml自动装配）</h4><h6 id="1-什么是自动装配"><a href="#1-什么是自动装配" class="headerlink" title="1. 什么是自动装配"></a>1. 什么是自动装配</h6><p>(1)根据指定装配规则 (属性名称或者属性类型)，Spring自动将匹配的属性值注入</p>
<h6 id="2-演示自动装配过程f"><a href="#2-演示自动装配过程f" class="headerlink" title="2. 演示自动装配过程f"></a>2. 演示自动装配过程f</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--实现自动装配</span></span><br><span class="line"><span class="comment">    bean标签属性autowire，配置自动装配 ，注入值bean的id值和类属性名称一样</span></span><br><span class="line"><span class="comment">    autowire属性常用两个值: byName根据属性名称注入 byType根据属性</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.autowire.Emp&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.spring5.autowire.Dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="IOC-操作-Bean-管理（引入外部属性文件）"><a href="#IOC-操作-Bean-管理（引入外部属性文件）" class="headerlink" title="IOC 操作 Bean 管理（引入外部属性文件）"></a>IOC 操作 Bean 管理（引入外部属性文件）</h4><h6 id="1-直接配置数据库信息"><a href="#1-直接配置数据库信息" class="headerlink" title="1.直接配置数据库信息"></a>1.直接配置数据库信息</h6><p>(1)配置德鲁伊连接池</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--直接配置连接池--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;密码&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>(2)引入连接池依赖jar包</p>
<img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220715190421588.png" alt="image-20220715190421588" style="zoom:200%;" />

<h6 id="2-引入外部属性文件配置数据库连接池"><a href="#2-引入外部属性文件配置数据库连接池" class="headerlink" title="2.引入外部属性文件配置数据库连接池"></a>2.引入外部属性文件配置数据库连接池</h6><p>(1)创建外部属性文件，properties文件，写数据库信息</p>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220715191510381.png" alt="image-20220715191510381"></p>
<p>(2)把外部properties属性文件引入到Spring配置文件中</p>
<p>*引入context名称空间</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:comtext</span>=<span class="string">&quot;http://www.springframework.org/schema/comtext&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/util  http://www.springframework.org/schema/util/spring-util.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                            http://www.springframework.org/schema/comtext http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><input disabled="" type="checkbox"> 在Spring配置文件中使用标签引入外部属性文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入外部属性文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--直接配置连接池--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.driverClass&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxActive&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.maxActive&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.initialSize&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="IOC-操作-Bean-管理（基于注解方式）"><a href="#IOC-操作-Bean-管理（基于注解方式）" class="headerlink" title="IOC 操作 Bean 管理（基于注解方式）"></a>IOC 操作 Bean 管理（基于注解方式）</h4><h6 id="1-什么是注解"><a href="#1-什么是注解" class="headerlink" title="1.什么是注解"></a>1.什么是注解</h6><p>(1)注解是代码特殊标记，格式：@注解名称(属性名称&#x3D;&#x3D;属性值…)</p>
<p>(2)使用注解，注解作用在类上面，方法上面，属性上面</p>
<p>(3)使用注解目的：简化xml配置</p>
<h6 id="2-SpringBean管理中创建对象提供注解"><a href="#2-SpringBean管理中创建对象提供注解" class="headerlink" title="2.SpringBean管理中创建对象提供注解"></a>2.SpringBean管理中创建对象提供注解</h6><p>(1)@Component  </p>
<p>(2)@Service </p>
<p>(3)@Controller </p>
<p>(4)@Repository</p>
<ul>
<li><input disabled="" type="checkbox"> 上面四个功能一样，都可以创建bean实例</li>
</ul>
<h6 id="3-基于注解方式实现对象"><a href="#3-基于注解方式实现对象" class="headerlink" title="3.基于注解方式实现对象"></a>3.基于注解方式实现对象</h6><p>第一步 引入依赖</p>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220715200433016.png" alt="image-20220715200433016"></p>
<p>第二步 开启组件扫描</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启组件扫描</span></span><br><span class="line"><span class="comment">    1.如果扫描多个包 多个包使用都会隔开</span></span><br><span class="line"><span class="comment">    2.扫描包上级目录</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.Zwan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第三步 创建类，在类上添加创建对象注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注解中的value属性值可以不写</span></span><br><span class="line"><span class="comment">//默认是类名首字母小写</span></span><br><span class="line"><span class="meta">@Component(value = &quot;userService&quot;)</span><span class="comment">//&lt;bean id = &quot;userService&quot; class = &quot;&quot;&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="4-开启组件扫描细节配置"><a href="#4-开启组件扫描细节配置" class="headerlink" title="4.开启组件扫描细节配置"></a>4.开启组件扫描细节配置</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启组件扫描</span></span><br><span class="line"><span class="comment">    1.如果扫描多个包 多个包使用都会隔开</span></span><br><span class="line"><span class="comment">    2.扫描包上级目录</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.Zwan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--示例1</span></span><br><span class="line"><span class="comment">    use-default-filters=&quot;false&quot; 表示现在不使用默认filter,自己配置filter</span></span><br><span class="line"><span class="comment">    context:include-filter, 设置扫描那些内容</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.Zwan&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--只扫描Controller--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--示例2</span></span><br><span class="line"><span class="comment">    context:exclude-filter, 设置不扫描那些内容</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.Zwan&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="5-基于注解方式实现属性注入"><a href="#5-基于注解方式实现属性注入" class="headerlink" title="5.基于注解方式实现属性注入"></a>5.基于注解方式实现属性注入</h6><p>(1)Autowired： 根据属性类型自动装配(注入)</p>
<ul>
<li><p>第一步  把service和dao类添加创建对象注解</p>
</li>
<li><p>第二步  在service中注入dao对象</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(value = &quot;userService&quot;)</span><span class="comment">//&lt;bean id = &quot;userService&quot; class = &quot;&quot;&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义dao类属性</span></span><br><span class="line">    <span class="comment">//不需要set方法</span></span><br><span class="line">    <span class="meta">@Autowired</span>  <span class="comment">//根据类型进行注入</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add......&quot;</span>);</span><br><span class="line">        userDao.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(2)Qualifier：根据属性名称进行注入</p>
<ul>
<li>使用和@Autowired一起使用</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(value = &quot;userService&quot;)</span><span class="comment">//&lt;bean id = &quot;userService&quot; class = &quot;&quot;&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义dao类属性</span></span><br><span class="line">    <span class="comment">//不需要set方法</span></span><br><span class="line">    <span class="meta">@Autowired</span>  <span class="comment">//根据类型进行注入</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;userDaoImpl1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add......&quot;</span>);</span><br><span class="line">        userDao.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Repository(value = &quot;userDaoImpl1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;dao add... &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(3)@Resource：可以根据类型也可以根据名称</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(value = &quot;userService&quot;)</span><span class="comment">//&lt;bean id = &quot;userService&quot; class = &quot;&quot;&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义dao类属性</span></span><br><span class="line">    <span class="comment">//不需要set方法</span></span><br><span class="line"><span class="comment">//    @Autowired  //根据类型进行注入</span></span><br><span class="line"><span class="comment">//    @Qualifier(value = &quot;userDaoImpl1&quot;)</span></span><br><span class="line">    <span class="meta">@Resource(name = &quot;userDaoImpl1&quot;)</span><span class="comment">//默认根据类型，加了name就根据名称</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add......&quot;</span>);</span><br><span class="line">        userDao.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(4)Value：注入普通类型属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;name&quot;)</span>	<span class="comment">//注入属性</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure>

<h6 id="6-纯注解开发"><a href="#6-纯注解开发" class="headerlink" title="6.纯注解开发"></a>6.纯注解开发</h6><p>(1)创建配置类，代替xml配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//作为配置类替代配置文件</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.Zwan&quot;&#125;)</span> <span class="comment">//扫描</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(2)编写测试类( AnnotationConfigApplicationContext(类.class) )</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testService2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class);</span><br><span class="line">    userService.add();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h3><h4 id="AOP（概念原理）"><a href="#AOP（概念原理）" class="headerlink" title="AOP（概念原理）"></a>AOP（概念原理）</h4><h6 id="1-什么是AOP"><a href="#1-什么是AOP" class="headerlink" title="1.什么是AOP"></a>1.什么是AOP</h6><p>（1）面向切面编程（方面），利用 AOP 可以对业务逻辑的各个部分进行隔离，从而使得 业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。</p>
<p>（2）通俗描述：不通过修改源代码方式，在主干功能里面添加新功能 </p>
<p>（3）使用登录例子说明 AOP</p>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220717145631349.png" alt="image-20220717145631349"></p>
<h4 id="AOP（底层原理）"><a href="#AOP（底层原理）" class="headerlink" title="AOP（底层原理）"></a>AOP（底层原理）</h4><h6 id="1-AOP底层使用动态代理"><a href="#1-AOP底层使用动态代理" class="headerlink" title="1.AOP底层使用动态代理"></a>1.AOP底层使用动态代理</h6><p>(1)有两种情况的动态代理</p>
<p>第一种 有接口情况，使用JDK动态代理</p>
<ul>
<li>创建接口实现类代理对象，增强类的方法</li>
</ul>
<p>第二种 没有接口情况，使用CGLIB代理</p>
<ul>
<li>创建子类的代理对象，增强类的方法</li>
</ul>
<p>分析图</p>
<p><img src="D:\SuchAllDir\文件夹\偷盗抢到的学习资料\spring5\笔记\分析图\图4.png" alt="图4"></p>
<h4 id="AOP-使用JDK动态代理"><a href="#AOP-使用JDK动态代理" class="headerlink" title="AOP(使用JDK动态代理)"></a>AOP(使用JDK动态代理)</h4><h6 id="1、使用-JDK-动态代理，使用-Proxy-类里面的方法创建代理对象"><a href="#1、使用-JDK-动态代理，使用-Proxy-类里面的方法创建代理对象" class="headerlink" title="1、使用 JDK 动态代理，使用 Proxy 类里面的方法创建代理对象"></a>1、使用 JDK 动态代理，使用 Proxy 类里面的方法创建代理对象</h6><p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220717154716872.png" alt="image-20220717154716872"></p>
<h6 id="1-调用newProxyInstans方法"><a href="#1-调用newProxyInstans方法" class="headerlink" title="(1)调用newProxyInstans方法"></a>(1)调用newProxyInstans方法</h6><p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220717154800109.png" alt="image-20220717154800109"></p>
<p>方法有三个参数</p>
<ul>
<li>第一个，类加载器</li>
<li>第二个，增强方法所在类，类实现的接口类，支持多个</li>
<li>第三个，实现接口 InvocationHandler ，创建代理对象，写增强的方法</li>
</ul>
<h6 id="2-编写-JDK-动态代理代码"><a href="#2-编写-JDK-动态代理代码" class="headerlink" title="2.编写 JDK 动态代理代码"></a>2.编写 JDK 动态代理代码</h6><ul>
<li>创建接口，定义方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(String id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>创建接口实现类，实现方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a+b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用Proxy类创建接口代理对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Zwan.Spring5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建接口代理类代理对象</span></span><br><span class="line">        Class[] interfaces = &#123;UserDao.class&#125;;</span><br><span class="line">        <span class="type">UserDaoImpl</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">dao</span> <span class="operator">=</span> (UserDao) Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, <span class="keyword">new</span> <span class="title class_">UserDaoProxy</span>(userDao));</span><br><span class="line">        System.out.println(dao.add(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建代理对象的代码</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserDaoProxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1 把创建的是谁的代理对象，把谁传进来</span></span><br><span class="line">    <span class="comment">//有参构造传递</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Object obj;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserDaoProxy</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//增强的逻辑</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//方法之前</span></span><br><span class="line">        System.out.println(<span class="string">&quot;方法执行之前...&quot;</span>+method.getName()+<span class="string">&quot;:传递的参数...&quot;</span>+ Arrays.toString(args));</span><br><span class="line">        <span class="comment">//可以根据method.getName()判断方法，并进行增强</span></span><br><span class="line">        <span class="comment">//被增强的方法执行</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">res</span> <span class="operator">=</span> method.invoke(obj, args);</span><br><span class="line">        <span class="comment">//方法之后</span></span><br><span class="line">        System.out.println(<span class="string">&quot;方法执行之后....&quot;</span>+obj);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="AOP-术语"><a href="#AOP-术语" class="headerlink" title="AOP(术语)"></a>AOP(术语)</h4><h6 id="1-连接点"><a href="#1-连接点" class="headerlink" title="1.连接点"></a>1.连接点</h6><p>类中的哪些方法可以被增强，这些方法称为连接点</p>
<h6 id="2-切入点"><a href="#2-切入点" class="headerlink" title="2.切入点"></a>2.切入点</h6><p>实际被增强的方法称为切入点</p>
<h6 id="3-通知-增强"><a href="#3-通知-增强" class="headerlink" title="3.通知(增强)"></a>3.通知(增强)</h6><p>(1)实际增强的逻辑部分叫通知(增强)</p>
<p>(2)通知有多种类型</p>
<ul>
<li>前置通知</li>
<li>后置通知</li>
<li>环绕通知</li>
<li>异常通知</li>
<li>最终通知</li>
</ul>
<h6 id="4-切面"><a href="#4-切面" class="headerlink" title="4.切面"></a>4.切面</h6><p>是动作</p>
<p>(1)把通知引用到切入点过程</p>
<h4 id="AOP操作-准备"><a href="#AOP操作-准备" class="headerlink" title="AOP操作(准备)"></a>AOP操作(准备)</h4><h6 id="1-Spring框架中一般基于AspectJ实现AOP操作"><a href="#1-Spring框架中一般基于AspectJ实现AOP操作" class="headerlink" title="1.Spring框架中一般基于AspectJ实现AOP操作"></a>1.Spring框架中一般基于AspectJ实现AOP操作</h6><p>(1)什么是AspectJ</p>
<ul>
<li>AspectJ不是Spring组成部分，独立AOP框架，一般把AspectJ和Spring框架一起用，进行AOP操作</li>
</ul>
<h6 id="2-基于AspectJ实现AOP操作"><a href="#2-基于AspectJ实现AOP操作" class="headerlink" title="2.基于AspectJ实现AOP操作"></a>2.基于AspectJ实现AOP操作</h6><p>(1)基于xml配置文件操作</p>
<p>(2)基于注解方式实现</p>
<h6 id="3-在项目工程里面引入AOP相关依赖"><a href="#3-在项目工程里面引入AOP相关依赖" class="headerlink" title="3.在项目工程里面引入AOP相关依赖"></a>3.在项目工程里面引入AOP相关依赖</h6><p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220717180117706.png" alt="image-20220717180117706"></p>
<h6 id="4-切入点表达式"><a href="#4-切入点表达式" class="headerlink" title="4.切入点表达式"></a>4.切入点表达式</h6><p>(1)切入点表达式作用：知道对哪个类里面的那个方法进行增强</p>
<p>(2)语法结构：</p>
<p>execution( [权限修饰符] [返回类型] [类全路径] [方法名称] ( [参数列表]) )</p>
<p>权限修饰符 *表示任意修饰符，返回类型可以不写</p>
<ul>
<li>举例1：对com.Zwan.dao.BookDao类中的add进行增强</li>
</ul>
<p>​		execution(* com.Zwan.dao.BookDao.add(..))</p>
<ul>
<li>举例2：对com.Zwan.dao.BookDao类中的<strong>所有方法</strong>进行增强</li>
</ul>
<p>​		execution(* com.Zwan.dao.BookDao.*(..))</p>
<ul>
<li>举例3：对com.Zwan.dao包中的<strong>所有类</strong>的<strong>所有方法</strong>进行增强</li>
</ul>
<p>​		execution(* com.Zwan.dao.<em>.</em>(..))</p>
<h4 id="AOP操作-AspectJ注解"><a href="#AOP操作-AspectJ注解" class="headerlink" title="AOP操作(AspectJ注解)"></a>AOP操作(AspectJ注解)</h4><h6 id="1-创建类，在类中定义方法"><a href="#1-创建类，在类中定义方法" class="headerlink" title="1.创建类，在类中定义方法"></a>1.创建类，在类中定义方法</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//被增强类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;add.......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="2-创建增强类-编写增强逻辑"><a href="#2-创建增强类-编写增强逻辑" class="headerlink" title="2.创建增强类(编写增强逻辑)"></a>2.创建增强类(编写增强逻辑)</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增强类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="comment">//前置通知</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="3-进行通知配置"><a href="#3-进行通知配置" class="headerlink" title="3.进行通知配置"></a>3.进行通知配置</h6><p>(1)在Spring配置文件中，开启注释扫描</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    开启扫描注解--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.Zwan.Spring5.aopanno&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>(2)使用注解扫描User和UserProxy对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//被增强类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;add.......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//增强类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="comment">//前置通知</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(3)在增强类上加注解@Aspect</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增强类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span>     <span class="comment">//生成代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="comment">//前置通知</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(4)在Spring配置文件中开启生成代理对象</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    开启Aspect生成代理对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="4-配置不同类型的通知-5种类型"><a href="#4-配置不同类型的通知-5种类型" class="headerlink" title="4.配置不同类型的通知(5种类型)"></a>4.配置不同类型的通知(5种类型)</h6><p>(1)在增强类的里面，在作为通知的方法上添加类型注解，使用切入点表达式配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增强类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span>     <span class="comment">//生成代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="comment">//前置通知</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;execution(* com.Zwan.Spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//最终通知，有异常也会执行</span></span><br><span class="line">    <span class="meta">@After(value = &quot;execution(* com.Zwan.Spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回值之后（后置通知，返回通知），会异常中断</span></span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;execution(* com.Zwan.Spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//异常通知</span></span><br><span class="line">    <span class="meta">@AfterThrowing(value = &quot;execution(* com.Zwan.Spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//环绕通知，前后都执行</span></span><br><span class="line">    <span class="meta">@Around(value = &quot;execution(* com.Zwan.Spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;环绕前....&quot;</span>);</span><br><span class="line"></span><br><span class="line">        proceedingJoinPoint.proceed();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;环绕后....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行效果</p>
<blockquote>
<p>环绕前….<br>before…..<br>add…….<br>环绕后….<br>after….<br>afterReturning….</p>
</blockquote>
<h6 id="5-相同切入点抽取"><a href="#5-相同切入点抽取" class="headerlink" title="5.相同切入点抽取"></a>5.相同切入点抽取</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//相同切入点抽取</span></span><br><span class="line"><span class="meta">@Pointcut(value = &quot;execution(* com.Zwan.Spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointDemo</span><span class="params">()</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="6-多个增强类对同一个方法增强，设置优先级"><a href="#6-多个增强类对同一个方法增强，设置优先级" class="headerlink" title="6.多个增强类对同一个方法增强，设置优先级"></a>6.多个增强类对同一个方法增强，设置优先级</h6><p>(1)在增强类中添加注解@Order(数字)，数字越小优先级越高</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonProxy</span> &#123;</span><br><span class="line">    <span class="comment">//前置通知</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;execution(* com.Zwan.Spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Person.... before.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果：</p>
<blockquote>
<p>Person…. before…..<br>环绕前….<br>before…..<br>add…….<br>环绕后….<br>after….<br>afterReturning….</p>
</blockquote>
<h6 id="7-完全使用注解开发"><a href="#7-完全使用注解开发" class="headerlink" title="7.完全使用注解开发"></a>7.完全使用注解开发</h6><p>(1)创建配置类，不需要xml配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.Zwan&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy(proxyTargetClass = true)</span><span class="comment">//默认false//开启Aspect代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">configAop</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="AOP操作-AspectJ配置文件"><a href="#AOP操作-AspectJ配置文件" class="headerlink" title="AOP操作(AspectJ配置文件)"></a>AOP操作(AspectJ配置文件)</h4><h6 id="1、创建两个类，增强类和被增强类，创建方法"><a href="#1、创建两个类，增强类和被增强类，创建方法" class="headerlink" title="1、创建两个类，增强类和被增强类，创建方法"></a>1、创建两个类，增强类和被增强类，创建方法</h6><h6 id="2、在-spring-配置文件中创建两个类对象"><a href="#2、在-spring-配置文件中创建两个类对象" class="headerlink" title="2、在 spring 配置文件中创建两个类对象"></a>2、在 spring 配置文件中创建两个类对象</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--创建对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.Spring5.aopxml.Book&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookProxy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Zwan.Spring5.aopxml.BookProxy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="3、在-spring-配置文件中配置切入点"><a href="#3、在-spring-配置文件中配置切入点" class="headerlink" title="3、在 spring 配置文件中配置切入点"></a>3、在 spring 配置文件中配置切入点</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置aop增强--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--切入点--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;p&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.Zwan.Spring5.aopxml.Book.buy(..))&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置切面--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;bookProxy&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            增强作用在具体的方法上--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;p&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="JBDCTemplate"><a href="#JBDCTemplate" class="headerlink" title="JBDCTemplate"></a>JBDCTemplate</h3><h4 id="JDBCTemplate-概念和准备"><a href="#JDBCTemplate-概念和准备" class="headerlink" title="JDBCTemplate(概念和准备)"></a>JDBCTemplate(概念和准备)</h4><h6 id="1-什么是JDBCTemplate"><a href="#1-什么是JDBCTemplate" class="headerlink" title="1.什么是JDBCTemplate"></a>1.什么是JDBCTemplate</h6><p>(1)Spring框架对JDBC进行封装，使用JDBCTemplate方便实现对数据库操作</p>
<h6 id="2-准备工作"><a href="#2-准备工作" class="headerlink" title="2.准备工作"></a>2.准备工作</h6><p>(1)引入相关jar包</p>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220717211831451.png" alt="image-20220717211831451"></p>
<p>(2)在Spring配置文件配置数据库连接池</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--直接配置连接池--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/user_db&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;账号&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;密码&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>(3)配置JDBCTemplate对象，注入DataSource</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    JDBCTemplate对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--      注入datasource--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>(4)创建一个service类，创建dao类，在dao注入jdbcTemplate对象</p>
<ul>
<li>配置文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    组件扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.Zwan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Service</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="comment">//注入dao</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Dao</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="comment">//注入JDBCTemplate</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="JDBCTemplate操作数据库-（添加操作）"><a href="#JDBCTemplate操作数据库-（添加操作）" class="headerlink" title="JDBCTemplate操作数据库 （添加操作）"></a>JDBCTemplate操作数据库 （添加操作）</h4><h6 id="1-对应数据库表创建实体类"><a href="#1-对应数据库表创建实体类" class="headerlink" title="1.对应数据库表创建实体类"></a>1.对应数据库表创建实体类</h6><p><strong><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718165430290.png" alt="image-20220718165430290"></strong></p>
<h6 id="2-编写Service和dao"><a href="#2-编写Service和dao" class="headerlink" title="2.编写Service和dao"></a>2.编写Service和dao</h6><p>(1)在dao中进行数据库添加操作</p>
<p>(2)调用jdbcTemplate对象的update方法实现添加</p>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718170136813.png" alt="image-20220718170136813"></p>
<ul>
<li>第一个:sql语句</li>
<li>第二个:可变参数</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="comment">//注入JDBCTemplate</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql,book.getUserId(), book.getUsername(), book.getUstatus());</span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="3-测试类"><a href="#3-测试类" class="headerlink" title="3.测试类"></a>3.测试类</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">    <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">    book.setUserId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    book.setUsername(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">    book.setUstatus(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    bookService.add(book);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718171819441.png" alt="image-20220718171819441"></p>
<h4 id="JDBCTemplate-操作数据库（修改和删除）"><a href="#JDBCTemplate-操作数据库（修改和删除）" class="headerlink" title="JDBCTemplate 操作数据库（修改和删除）"></a>JDBCTemplate 操作数据库（修改和删除）</h4><h6 id="1-修改"><a href="#1-修改" class="headerlink" title="1.修改"></a>1.修改</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set username=?,ustatus=? where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, book.getUsername(), book.getUstatus(),book.getUserId());</span><br><span class="line">    System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testBook</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book.setUserId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        book.setUsername(<span class="string">&quot;java-update&quot;</span>);</span><br><span class="line">        book.setUstatus(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        bookService.updateBook(book);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718173410727.png" alt="image-20220718173410727"></p>
<h6 id="2-删除"><a href="#2-删除" class="headerlink" title="2.删除"></a>2.删除</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(String id)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from t_book where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql,id);</span><br><span class="line">    System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testBook</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">        </span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book.setUserId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        book.setUsername(<span class="string">&quot;java-update&quot;</span>);</span><br><span class="line">        book.setUstatus(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        bookService.deleteBook(book.getUserId());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718173619774.png" alt="image-20220718173619774"></p>
<h4 id="JDBCTemplate-操作数据库（查询返回某个值）"><a href="#JDBCTemplate-操作数据库（查询返回某个值）" class="headerlink" title="JDBCTemplate 操作数据库（查询返回某个值）"></a>JDBCTemplate 操作数据库（查询返回某个值）</h4><h6 id="1-查询表中有多少记录，返回是某个值"><a href="#1-查询表中有多少记录，返回是某个值" class="headerlink" title="1.查询表中有多少记录，返回是某个值"></a>1.查询表中有多少记录，返回是某个值</h6><h6 id="2-使用jdbcTemplate实现查询返回某个值代码"><a href="#2-使用jdbcTemplate实现查询返回某个值代码" class="headerlink" title="2.使用jdbcTemplate实现查询返回某个值代码"></a>2.使用jdbcTemplate实现查询返回某个值代码</h6><p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718180756136.png" alt="image-20220718180756136"></p>
<ul>
<li>两个参数</li>
<li>sql语句</li>
<li>返回类型的class</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">selectCount</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select count(*) from t_book&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql,Integer.class);</span><br><span class="line">    <span class="keyword">return</span> update;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">        System.out.println(bookService.findCount());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="JDBCTemplate-操作数据库（查询返回对象）"><a href="#JDBCTemplate-操作数据库（查询返回对象）" class="headerlink" title="JDBCTemplate 操作数据库（查询返回对象）"></a>JDBCTemplate 操作数据库（查询返回对象）</h4><h6 id="1-场景：查询图书详情"><a href="#1-场景：查询图书详情" class="headerlink" title="1.场景：查询图书详情"></a>1.场景：查询图书详情</h6><h6 id="2-jdbcTemplate实现查询返回对象"><a href="#2-jdbcTemplate实现查询返回对象" class="headerlink" title="2.jdbcTemplate实现查询返回对象"></a>2.jdbcTemplate实现查询返回对象</h6><p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718181713729.png" alt="image-20220718181713729"></p>
<ul>
<li>三个参数</li>
<li>sql语句</li>
<li>RowMapper,是接口，返回不同类型的数据，使用这个接口里面实现类完成数据封装</li>
<li>sql语句问号中值，可变参数</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Book <span class="title function_">findBookInfo</span><span class="params">(String id)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql,<span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Book&gt;(Book.class),id);</span><br><span class="line">    <span class="keyword">return</span> book;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<blockquote>
<p>Book{userId&#x3D;’1’, username&#x3D;’aa’, ustatus&#x3D;’a’}</p>
</blockquote>
<h4 id="JDBCTemplate-操作数据库（查询返回集合）"><a href="#JDBCTemplate-操作数据库（查询返回集合）" class="headerlink" title="JDBCTemplate 操作数据库（查询返回集合）"></a>JDBCTemplate 操作数据库（查询返回集合）</h4><h6 id="1-场景：查询图书列表分页…"><a href="#1-场景：查询图书列表分页…" class="headerlink" title="1.场景：查询图书列表分页…"></a>1.场景：查询图书列表分页…</h6><h6 id="2-jdbcTemplate实现查询返回集合"><a href="#2-jdbcTemplate实现查询返回集合" class="headerlink" title="2.jdbcTemplate实现查询返回集合"></a>2.jdbcTemplate实现查询返回集合</h6><p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718184056848.png" alt="image-20220718184056848"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">findAllBook</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book&quot;</span>;</span><br><span class="line">    List&lt;Book&gt; book = jdbcTemplate.query(sql,<span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Book&gt;(Book.class));</span><br><span class="line">    <span class="keyword">return</span> book;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<blockquote>
<p>​	[Book{userId&#x3D;’1’, username&#x3D;’aa’, ustatus&#x3D;’a’}, Book{userId&#x3D;’2’, username&#x3D;’bb’, ustatus&#x3D;’b’}]</p>
</blockquote>
<h4 id="JDBCTemplate-操作数据库（批量操作）"><a href="#JDBCTemplate-操作数据库（批量操作）" class="headerlink" title="JDBCTemplate 操作数据库（批量操作）"></a>JDBCTemplate 操作数据库（批量操作）</h4><h6 id="批量操作：操作表里的多条记录"><a href="#批量操作：操作表里的多条记录" class="headerlink" title="批量操作：操作表里的多条记录"></a>批量操作：操作表里的多条记录</h6><h6 id="jdbcTemplate实现批量操作的方法"><a href="#jdbcTemplate实现批量操作的方法" class="headerlink" title="jdbcTemplate实现批量操作的方法"></a>jdbcTemplate实现批量操作的方法</h6><p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718184804395.png" alt="image-20220718184804395"></p>
<ul>
<li>两个参数</li>
<li>sql语句</li>
<li>list集合：添加多条记录数据</li>
</ul>
<h6 id="1-添加"><a href="#1-添加" class="headerlink" title="1.添加"></a>1.添加</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchAddBook</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] ints = jdbcTemplate.batchUpdate(sql,batchArgs);</span><br><span class="line">    System.out.println(Arrays.toString(ints));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批量添加</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Object[] o1 = &#123;<span class="string">&quot;3&quot;</span>,<span class="string">&quot;cc&quot;</span>,<span class="string">&quot;c&quot;</span>&#125;;</span><br><span class="line">Object[] o2 = &#123;<span class="string">&quot;4&quot;</span>,<span class="string">&quot;dd&quot;</span>,<span class="string">&quot;d&quot;</span>&#125;;</span><br><span class="line">Object[] o3 = &#123;<span class="string">&quot;5&quot;</span>,<span class="string">&quot;ee&quot;</span>,<span class="string">&quot;e&quot;</span>&#125;;</span><br><span class="line">batchArgs.add(o1);</span><br><span class="line">batchArgs.add(o2);</span><br><span class="line">batchArgs.add(o3);</span><br><span class="line">bookService.batchAdd(batchArgs);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<blockquote>
<p>[1, 1, 1]</p>
</blockquote>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718190226015.png" alt="image-20220718190226015"></p>
<h6 id="2-修改"><a href="#2-修改" class="headerlink" title="2.修改"></a>2.修改</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchUpdateBook</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set username=?,ustatus=? where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] ints = jdbcTemplate.batchUpdate(sql,batchArgs);</span><br><span class="line">    System.out.println(Arrays.toString(ints));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批量修改</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//注意sql语句的参数的值的顺序</span></span><br><span class="line">Object[] o1 = &#123;<span class="string">&quot;ccc&quot;</span>,<span class="string">&quot;cc&quot;</span>,<span class="string">&quot;3&quot;</span>&#125;;</span><br><span class="line">Object[] o2 = &#123;<span class="string">&quot;ddd&quot;</span>,<span class="string">&quot;dd&quot;</span>,<span class="string">&quot;4&quot;</span>&#125;;</span><br><span class="line">Object[] o3 = &#123;<span class="string">&quot;eee&quot;</span>,<span class="string">&quot;ee&quot;</span>,<span class="string">&quot;5&quot;</span>&#125;;</span><br><span class="line">batchArgs.add(o1);</span><br><span class="line">batchArgs.add(o2);</span><br><span class="line">batchArgs.add(o3);</span><br><span class="line">bookService.batchUpdate(batchArgs);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<blockquote>
<p>[1, 1, 1]</p>
</blockquote>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718191330971.png" alt="image-20220718191330971"></p>
<h6 id="3-删除"><a href="#3-删除" class="headerlink" title="3.删除"></a>3.删除</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchDeleteBook</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from t_book where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] ints = jdbcTemplate.batchUpdate(sql,batchArgs);</span><br><span class="line">    System.out.println(Arrays.toString(ints));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批量删除</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//只需要id就可以了</span></span><br><span class="line">Object[] o1 = &#123;<span class="string">&quot;3&quot;</span>&#125;;</span><br><span class="line">Object[] o2 = &#123;<span class="string">&quot;4&quot;</span>&#125;;</span><br><span class="line">Object[] o3 = &#123;<span class="string">&quot;5&quot;</span>&#125;;</span><br><span class="line">batchArgs.add(o1);</span><br><span class="line">batchArgs.add(o2);</span><br><span class="line">batchArgs.add(o3);</span><br><span class="line">bookService.batchDelete(batchArgs);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<blockquote>
<p>[1, 1, 1]</p>
</blockquote>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718192320740.png" alt="image-20220718192320740"></p>
<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><h4 id="事务概念"><a href="#事务概念" class="headerlink" title="事务概念"></a>事务概念</h4><h6 id="1-什么是事务"><a href="#1-什么是事务" class="headerlink" title="1.什么是事务"></a>1.什么是事务</h6><p>（1）事务是数据库操作最基本单元，逻辑上一组操作，要么都成功，如果有一个失败所有操 作都失败 </p>
<p>（2）典型场景：银行转账，lucy 转账 100 元 给 mary，lucy 少 100，mary 多 100</p>
<h6 id="2-事务的四个特性（ACID）"><a href="#2-事务的四个特性（ACID）" class="headerlink" title="2.事务的四个特性（ACID）"></a>2.事务的四个特性（ACID）</h6><ul>
<li>原子性</li>
<li>一致性</li>
<li>隔离性</li>
<li>持久性</li>
</ul>
<h4 id="事务操作（搭建事务操作环境）"><a href="#事务操作（搭建事务操作环境）" class="headerlink" title="事务操作（搭建事务操作环境）"></a>事务操作（搭建事务操作环境）</h4><p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718194200727.png" alt="image-20220718194200727"></p>
<h6 id="1-创建数据库表，添加记录"><a href="#1-创建数据库表，添加记录" class="headerlink" title="1.创建数据库表，添加记录"></a>1.创建数据库表，添加记录</h6><p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220718194613711.png" alt="image-20220718194613711"></p>
<h6 id="2-创建service-搭建dao，完成对象创建和注入关系"><a href="#2-创建service-搭建dao，完成对象创建和注入关系" class="headerlink" title="2.创建service,搭建dao，完成对象创建和注入关系"></a>2.创建service,搭建dao，完成对象创建和注入关系</h6><p>(1)service注入dao，在dao的实现类注入jdbcTemplate，在jdbcTemplate注入dataSource</p>
<ul>
<li>service中</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span>    <span class="comment">//创建对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//注入dao</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>dao中</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span>     <span class="comment">//创建对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="3-在dao中创建两个方法，多钱和少钱的方法，在service中创建方法（转账的方法）"><a href="#3-在dao中创建两个方法，多钱和少钱的方法，在service中创建方法（转账的方法）" class="headerlink" title="3.在dao中创建两个方法，多钱和少钱的方法，在service中创建方法（转账的方法）"></a>3.在dao中创建两个方法，多钱和少钱的方法，在service中创建方法（转账的方法）</h6><ul>
<li>dao中(简单模拟)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addMoney</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_account set money=money+? where id=?&quot;</span>;</span><br><span class="line">    jdbcTemplate.update(sql,<span class="number">100</span>,<span class="string">&quot;lucy&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reduceMoney</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_account set money=money-? where id=?&quot;</span>;</span><br><span class="line">    jdbcTemplate.update(sql,<span class="number">100</span>,<span class="string">&quot;mary&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>service中</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span>    <span class="comment">//创建对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//注入dao</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">account</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//少钱</span></span><br><span class="line">        userDao.reduceMoney();</span><br><span class="line">        <span class="comment">//多钱</span></span><br><span class="line">        userDao.addMoney();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Text1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class);</span><br><span class="line">    userService.account();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220719081822517.png" alt="image-20220719081822517"></p>
<h6 id="4-上面代码，正常执行没有问题，执行过程中出现异常，代码会出现问题"><a href="#4-上面代码，正常执行没有问题，执行过程中出现异常，代码会出现问题" class="headerlink" title="4.上面代码，正常执行没有问题，执行过程中出现异常，代码会出现问题"></a>4.上面代码，正常执行没有问题，执行过程中出现异常，代码会出现问题</h6><ul>
<li>模拟异常</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">account</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//少钱</span></span><br><span class="line">    userDao.reduceMoney();</span><br><span class="line">    <span class="comment">//模拟异常</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//多钱</span></span><br><span class="line">    userDao.addMoney();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220719082505762.png" alt="image-20220719082505762"></p>
<ul>
<li>效果</li>
</ul>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220719082546149.png" alt="image-20220719082546149"></p>
<p>(1)解决方法</p>
<ul>
<li>使用事务解决</li>
</ul>
<p>(2)事务操作过程</p>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220719083248396.png" alt="image-20220719083248396"></p>
<h4 id="事务操作-Spring-事务管理介绍"><a href="#事务操作-Spring-事务管理介绍" class="headerlink" title="事务操作(Spring 事务管理介绍)"></a>事务操作(Spring 事务管理介绍)</h4><h6 id="1-事务一般添加到JavaEE三层结构的Service层（业务逻辑层）"><a href="#1-事务一般添加到JavaEE三层结构的Service层（业务逻辑层）" class="headerlink" title="1.事务一般添加到JavaEE三层结构的Service层（业务逻辑层）"></a>1.事务一般添加到JavaEE三层结构的Service层（业务逻辑层）</h6><h6 id="2-在Spring-进行事务管理操作"><a href="#2-在Spring-进行事务管理操作" class="headerlink" title="2.在Spring 进行事务管理操作"></a>2.在Spring 进行事务管理操作</h6><p>(1)有两种方式：<strong>编程式事务管理</strong>和**声明式事务管理 ** (<em>建议使用声明式事务管理</em>)</p>
<h6 id="3-声明式事务管理"><a href="#3-声明式事务管理" class="headerlink" title="3.声明式事务管理"></a>3.声明式事务管理</h6><p>(1)基于注解方式</p>
<p>(2)基于xml配置文件方式 </p>
<h6 id="4-在Spring进行声明式事务管理，底层使用AOP原理"><a href="#4-在Spring进行声明式事务管理，底层使用AOP原理" class="headerlink" title="4.在Spring进行声明式事务管理，底层使用AOP原理"></a>4.在Spring进行声明式事务管理，底层使用AOP原理</h6><h6 id="5-Spring-事务管理API"><a href="#5-Spring-事务管理API" class="headerlink" title="5.Spring 事务管理API"></a>5.Spring 事务管理API</h6><p>(1)提供了一个接口，代表事务管理器，这个接口针对不同的框架提供不同的实现类</p>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220719084459767.png" alt="image-20220719084459767"></p>
<h4 id="事务操作-注解声明式事务管理"><a href="#事务操作-注解声明式事务管理" class="headerlink" title="事务操作(注解声明式事务管理)"></a>事务操作(注解声明式事务管理)</h4><h6 id="1-在Spring的配置文件中配置事务管理器"><a href="#1-在Spring的配置文件中配置事务管理器" class="headerlink" title="1.在Spring的配置文件中配置事务管理器"></a>1.在Spring的配置文件中配置事务管理器</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    创建事务管理器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSourceTransactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="2-在Spring-配置文件中开启事务注解"><a href="#2-在Spring-配置文件中开启事务注解" class="headerlink" title="2.在Spring 配置文件中开启事务注解"></a>2.在Spring 配置文件中开启事务注解</h6><p>(1)在Spring配置文件中引入名称空间 tx</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span>     <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                            http://www.springframework.org/schema/util  http://www.springframework.org/schema/util/spring-util.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>(2)开启事务的注解</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    开启事务注解--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;dataSourceTransactionManager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="3-在service类上面（或者service类里面方法上面）添加事务注解"><a href="#3-在service类上面（或者service类里面方法上面）添加事务注解" class="headerlink" title="3.在service类上面（或者service类里面方法上面）添加事务注解"></a>3.在service类上面（或者service类里面方法上面）添加事务注解</h6><p>(1)@Transactional  &#x2F;&#x2F;事务注解,添加到类或者方法上</p>
<p>(2)如果把这个注解放在类上，这个类中的所有方法都要添加事务</p>
<p>(3)如果把这个注解放在方法上，这个方法添加事务</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span>  <span class="comment">//事务注解</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> </span><br></pre></td></tr></table></figure>

<p>输出效果：</p>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220719090453107.png" alt="image-20220719090453107"></p>
<h4 id="事务操作-声明式事务管理参数配置"><a href="#事务操作-声明式事务管理参数配置" class="headerlink" title="事务操作(声明式事务管理参数配置)"></a>事务操作(声明式事务管理参数配置)</h4><h6 id="1、在-service-类上面添加注解-Transactional，在这个注解里面可以配置事务相关参数"><a href="#1、在-service-类上面添加注解-Transactional，在这个注解里面可以配置事务相关参数" class="headerlink" title="1、在 service 类上面添加注解@Transactional，在这个注解里面可以配置事务相关参数"></a>1、在 service 类上面添加注解@Transactional，在这个注解里面可以配置事务相关参数</h6><p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220719090810783.png" alt="image-20220719090810783"></p>
<h6 id="2-propagation：事务传播行为"><a href="#2-propagation：事务传播行为" class="headerlink" title="2.propagation：事务传播行为"></a>2.<em><strong>propagation</strong></em>：事务传播行为</h6><p>（1）当一个事务方法被另外一个事务方法调用时候，这个事务方法如何进行</p>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220719091019819.png" alt="image-20220719091019819"></p>
<h6 id="3-isolation：事务隔离级数"><a href="#3-isolation：事务隔离级数" class="headerlink" title="3.isolation：事务隔离级数"></a>3.isolation：事务隔离级数</h6><p>(1)事务有特性成为隔离性，多事务操作之间不会产生影响，不考虑隔离性会产生很多问题</p>
<p>(2)三个读问题：脏读、不可重复读、虚（幻）读</p>
<ul>
<li>脏读：一个未提交事务读取到另一个未提交事务的数据</li>
<li>不可重复读：一个未提交的事务读取到另一个事务修改数据，读取两次的数据不同</li>
<li>虚读：一个未提交事务读取到另一提交事务添加的数据</li>
</ul>
<p>(3)解决：通过设置事务隔离性解决读问题</p>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220719120613964.png" alt="image-20220719120613964"></p>
<p>设置隔离级别</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(propagation = Propagation.REQUIRED ,isolation = Isolation.REPEATABLE_READ)</span>  <span class="comment">//事务注解</span></span><br></pre></td></tr></table></figure>

<h6 id="4-timeout：超出时间"><a href="#4-timeout：超出时间" class="headerlink" title="4.timeout：超出时间"></a>4.<em><strong>timeout</strong></em>：超出时间</h6><p>(1)事务需要在一定时间内进行提交，如果不提交进行回滚</p>
<p>(2)默认值是-1，设置时间以秒为单位</p>
<h6 id="5-readOnly：是否只读"><a href="#5-readOnly：是否只读" class="headerlink" title="5.readOnly：是否只读"></a>5.<em><strong>readOnly</strong></em>：是否只读</h6><p>(1)读：查询操作，写：添加删除修改操作</p>
<p>(2)默认值false，表示可以查询，可以添加修改删除操作</p>
<p>(3)设置成true只能查询</p>
<h6 id="6-rollbackFor：回滚"><a href="#6-rollbackFor：回滚" class="headerlink" title="6.rollbackFor：回滚"></a>6.<em><strong>rollbackFor</strong></em>：回滚</h6><p>(1)设置哪些异常进行事务回滚</p>
<h6 id="7-noRollbackFor：不回滚"><a href="#7-noRollbackFor：不回滚" class="headerlink" title="7.noRollbackFor：不回滚"></a>7.<em><strong>noRollbackFor</strong></em>：不回滚</h6><p>(1)设置哪些异常不进行事务回滚</p>
<h4 id="事务操作-xml声明式事务管理"><a href="#事务操作-xml声明式事务管理" class="headerlink" title="事务操作(xml声明式事务管理)"></a>事务操作(xml声明式事务管理)</h4><h6 id="1-在Spring配置文件中进行配置"><a href="#1-在Spring配置文件中进行配置" class="headerlink" title="1.在Spring配置文件中进行配置"></a>1.在Spring配置文件中进行配置</h6><ul>
<li>第一步 配置事务管理器</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--   1 创建事务管理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSourceTransactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>第二步 配置通知</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    2 配置通知--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txadvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;dataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--transaction-manager的默认值为transactionManager，事务管理器的id相同时可以不写--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        配置事务参数--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            指定哪种规则的方法上面添加事务--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;account&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--   acc开头的&lt;tx:method name=&quot;acc*&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>配置切入点和切面</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    3 配置切入点和切面--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        配置切入点--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pt&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.Zwan.Spring5.service.UserService.*(..))&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        配置切面--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txadvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="事务操作（完全注解声明式事务管理）"><a href="#事务操作（完全注解声明式事务管理）" class="headerlink" title="事务操作（完全注解声明式事务管理）"></a>事务操作（完全注解声明式事务管理）</h4><h6 id="1-创建配置类，使用配置类代替xml配置文件"><a href="#1-创建配置类，使用配置类代替xml配置文件" class="headerlink" title="1.创建配置类，使用配置类代替xml配置文件"></a>1.创建配置类，使用配置类代替xml配置文件</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//配置类</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.Zwan&quot;)</span>   <span class="comment">//扫描</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span>    <span class="comment">//开启事务</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TxConfig</span> &#123;</span><br><span class="line">    <span class="comment">//创建数据库连接池</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">getDruidDataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        dataSource.setDriverClassName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/user_db&quot;</span>);</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;密码&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建JdbcTemplate对象</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> JdbcTemplate <span class="title function_">getJdbcTemplate</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="comment">//到IOC容器中根据类型找到dataSource</span></span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbcTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>();</span><br><span class="line">        <span class="comment">//注入dataSource</span></span><br><span class="line">        jdbcTemplate.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建事务管理器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSourceTransactionManager <span class="title function_">getDataSourceTransactionManager</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">DataSourceTransactionManager</span> <span class="variable">transactionManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>();</span><br><span class="line">        transactionManager.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> transactionManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Spring5-框架新功能"><a href="#Spring5-框架新功能" class="headerlink" title="Spring5 框架新功能"></a>Spring5 框架新功能</h3><h4 id="1-整个Spring5框架基于java8，运行时兼容JDK9，许多不建议使用的类和方法在代码库中删除掉了"><a href="#1-整个Spring5框架基于java8，运行时兼容JDK9，许多不建议使用的类和方法在代码库中删除掉了" class="headerlink" title="1.整个Spring5框架基于java8，运行时兼容JDK9，许多不建议使用的类和方法在代码库中删除掉了"></a>1.整个Spring5框架基于java8，运行时兼容JDK9，许多不建议使用的类和方法在代码库中删除掉了</h4><h4 id="2-自带了通用的日志封装"><a href="#2-自带了通用的日志封装" class="headerlink" title="2.自带了通用的日志封装"></a>2.自带了通用的日志封装</h4><h6 id="1-Spring5已经移除Log4jConfigListener，官方建议使用Log4j2"><a href="#1-Spring5已经移除Log4jConfigListener，官方建议使用Log4j2" class="headerlink" title="(1)Spring5已经移除Log4jConfigListener，官方建议使用Log4j2"></a>(1)Spring5已经移除Log4jConfigListener，官方建议使用Log4j2</h6><h6 id="2-Spring5框架整合Log4j2"><a href="#2-Spring5框架整合Log4j2" class="headerlink" title="(2)Spring5框架整合Log4j2"></a>(2)Spring5框架整合Log4j2</h6><ul>
<li>第一步 引入jar包</li>
</ul>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220719140512661.png" alt="image-20220719140512661"></p>
<ul>
<li>第二步 创建 Log4j2.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--日志级别以及优先级排序: OFF &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE &gt; ALL --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Configuration后面的status用于设置log4j2自身内部的信息输出，可以不设置，当设置成trace时，可以看到log4j2内部各种详细输出--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">status</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--先定义所有的appender--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appenders</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--输出日志信息到控制台--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">console</span> <span class="attr">name</span>=<span class="string">&quot;Console&quot;</span> <span class="attr">target</span>=<span class="string">&quot;SYSTEM_OUT&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--控制日志输出的格式--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">&quot;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125; - %msg%n&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">console</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appenders</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--然后定义logger，只有定义了logger并引入的appender，appender才会生效--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--root：用于指定项目的根日志，如果没有单独指定Logger，则会使用root作为默认的日志输出--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">loggers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;Console&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-Spring5-框架核心容器支持-Nullable-注解"><a href="#3-Spring5-框架核心容器支持-Nullable-注解" class="headerlink" title="3.Spring5 框架核心容器支持***@Nullable*** 注解"></a>3.Spring5 框架核心容器支持***@Nullable*** 注解</h4><h6 id="1-Nullable-注解可以使用在方法上面，属性上面，参数上面，表示方法返回可以为空，属性值可以-为空，参数值可以为空"><a href="#1-Nullable-注解可以使用在方法上面，属性上面，参数上面，表示方法返回可以为空，属性值可以-为空，参数值可以为空" class="headerlink" title="(1)@Nullable 注解可以使用在方法上面，属性上面，参数上面，表示方法返回可以为空，属性值可以 为空，参数值可以为空"></a>(1)@Nullable 注解可以使用在方法上面，属性上面，参数上面，表示方法返回可以为空，属性值可以 为空，参数值可以为空</h6><h6 id="2-注解用在方法上面，方法返回值可以为空"><a href="#2-注解用在方法上面，方法返回值可以为空" class="headerlink" title="(2)注解用在方法上面，方法返回值可以为空"></a>(2)注解用在方法上面，方法返回值可以为空</h6><h6 id="3-注解使用在方法参数里面，方法参数可以为空"><a href="#3-注解使用在方法参数里面，方法参数可以为空" class="headerlink" title="(3)注解使用在方法参数里面，方法参数可以为空"></a>(3)注解使用在方法参数里面，方法参数可以为空</h6><h6 id="4-注解使用在属性上面，属性值可以为空"><a href="#4-注解使用在属性上面，属性值可以为空" class="headerlink" title="(4)注解使用在属性上面，属性值可以为空"></a>(4)注解使用在属性上面，属性值可以为空</h6><h4 id="4、Spring5-核心容器支持函数式风格-GenericApplicationContext"><a href="#4、Spring5-核心容器支持函数式风格-GenericApplicationContext" class="headerlink" title="4、Spring5 核心容器支持函数式风格 GenericApplicationContext"></a>4、Spring5 核心容器支持函数式风格 GenericApplicationContext</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGenericApplicationContext</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//1 创建GenericApplicationContext对象</span></span><br><span class="line">    <span class="type">GenericApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericApplicationContext</span>();</span><br><span class="line">    <span class="comment">//2 调用context的方法进行注册</span></span><br><span class="line">    context.refresh();</span><br><span class="line">    <span class="comment">//context.registerBean(User.class,()-&gt;new User());</span></span><br><span class="line">    context.registerBean(<span class="string">&quot;user1&quot;</span>,User.class,()-&gt;<span class="keyword">new</span> <span class="title class_">User</span>());</span><br><span class="line">    <span class="comment">//3 获取在Spring注册的对象</span></span><br><span class="line">    <span class="comment">//User user = (User) context.getBean(&quot;com.Zwan.Spring5.test.User&quot;);</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) context.getBean(<span class="string">&quot;user1&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-Spring5-支持整合JUnit5"><a href="#5-Spring5-支持整合JUnit5" class="headerlink" title="5.Spring5 支持整合JUnit5"></a>5.Spring5 支持整合JUnit5</h4><h6 id="1-整合JUnit4"><a href="#1-整合JUnit4" class="headerlink" title="(1)整合JUnit4"></a>(1)整合JUnit4</h6><ul>
<li>第一步 引入Spring 相关针对测试的依赖</li>
</ul>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220719144008027.png" alt="image-20220719144008027"></p>
<ul>
<li>第二步 创建测试类，使用注解方式完成</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span> <span class="comment">//指定单元测试框架版本</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:bean1.xml&quot;)</span>    <span class="comment">//加载配置文件,使用xml时注意不要和注解打岔</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JTest4</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        userService.account();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="2-整合JUnit5"><a href="#2-整合JUnit5" class="headerlink" title="(2)整合JUnit5"></a>(2)整合JUnit5</h6><ul>
<li>第一步 引入JUnit5的jar包</li>
</ul>
<p><img src="C:\Users\hu'hao\AppData\Roaming\Typora\typora-user-images\image-20220719145034691.png" alt="image-20220719145034691"></p>
<ul>
<li>第二部 创建测试类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExtendWith(SpringExtension.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:bean1.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JTest5</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        userService.account();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用一个复合注解代替上面两个注解完成整合</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringJUnitConfig(locations = &quot;classpath:bean1.xml&quot;)</span>   <span class="comment">//一键复合注解</span></span><br></pre></td></tr></table></figure>

<h4 id="6-SpringWebflux（待完成）"><a href="#6-SpringWebflux（待完成）" class="headerlink" title="6.SpringWebflux（待完成）"></a>6.SpringWebflux（待完成）</h4><h6 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h6><h6 id="2-响应式编程"><a href="#2-响应式编程" class="headerlink" title="2.响应式编程"></a>2.响应式编程</h6><h6 id="3-Webflux执行流程和核心API"><a href="#3-Webflux执行流程和核心API" class="headerlink" title="3.Webflux执行流程和核心API"></a>3.Webflux执行流程和核心API</h6><h6 id="4-SpringWebflux（基于注解编程模型）"><a href="#4-SpringWebflux（基于注解编程模型）" class="headerlink" title="4.SpringWebflux（基于注解编程模型）"></a>4.SpringWebflux（基于注解编程模型）</h6><h6 id="5-SpringWebflux（基于函数式编程模型）"><a href="#5-SpringWebflux（基于函数式编程模型）" class="headerlink" title="5.SpringWebflux（基于函数式编程模型）"></a>5.SpringWebflux（基于函数式编程模型）</h6>
    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/javaWeb/" rel="tag"># javaWeb</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/10/31/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/" rel="prev" title="第一篇博客">
                  <i class="fa fa-chevron-left"></i> 第一篇博客
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/11/01/%E5%A5%B6%E7%9B%96/" rel="next" title="奶盖">
                  奶盖 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">作者：Zwanan</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
